# AllJoyn&trade; Standard Core

## æ¦‚è§ˆ
AllJoyn æ¡†æ¶æ˜¯ä¸€ä¸ªå¼€æºæ“ä½œç³»ç»Ÿï¼Œä¸ºå¼ºè°ƒç§»åŠ¨æ€§ï¼Œå®‰å…¨æ€§ä»¥åŠåŠ¨æ€é…ç½®çš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºæä¾›è¿è¡Œç¯å¢ƒã€‚AllJoyn ç³»ç»Ÿå¯å¤„ç†å¼‚æ„åˆ†å¸ƒå¼ ç³»ç»Ÿæ‰€å›ºæœ‰çš„å¤æ‚é—®é¢˜ï¼ŒåŒ…æ‹¬å¯ç§»åŠ¨æ€§ä»‹å…¥åæ‰€å¸¦æ¥çš„ç‰¹æ®Šé—®é¢˜ã€‚å€Ÿæ­¤å¸®åŠ©ï¼Œç¨‹åºå¼€å‘è€…å¯ä»¥ä¸“æ³¨äºè§£å†³æ ¸å¿ƒé—®é¢˜ã€‚

AllJoyn æ¡†æ¶æ˜¯â€œå¹³å°æ— å…³â€çš„ï¼Œå…¶è®¾è®¡åˆè¡·ä¸ºå°½æœ€å¤§å¯èƒ½ç‹¬ç«‹äºè¿è¡Œè®¾å¤‡çš„æ“ä½œç³»ç»Ÿï¼Œç¡¬ä»¶åŠè½¯ä»¶ç‰¹æ€§ã€‚AllJoyn æ¡†æ¶è¢«è®¾è®¡åº”ç”¨äº Microsoft Windows, Linux, Android, iOS, OS X, ä»¥åŠ OpenWRT å¹³å°ã€‚

äº²è¿‘æ€§ä¸ç§»åŠ¨æ€§ä¸€å€¼ä¿ç•™åœ¨ AllJoyn æ¡†æ¶çš„è®¾è®¡ç†å¿µå½“ä¸­ã€‚åœ¨ç§»åŠ¨ç¯å¢ƒä¸­ï¼Œè®¾å¤‡ä¼šä¸åœåœ°è¿›å…¥ï¼Œç¦»å¼€å…¶ä»–è®¾å¤‡çš„é‚»åŸŸï¼Œä¸æ­¤åŒæ—¶ï¼ŒåŸºç¡€ç½‘ç»œ å®¹é‡ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚

AllJoyn SDKs å¯åœ¨ä»¥ä¸‹ç½‘å€è·å¾— (http://www.allseenalliance.org).

å¯ç”¨ AllJoyn æ¡†æ¶å¼€å‘çš„åº”ç”¨ç¨‹åºç±»åˆ«ä»…ä»…å—é™äºå¼€å‘è€…çš„æƒ³åƒåŠ›ã€‚ä¾‹å¦‚ç¤¾äº¤ç½‘ç»œçš„æ‹“å±•ã€‚ç”¨æˆ·å¯ä»¥å»ºç«‹ä¸ªäººç®€ä»‹å¹¶å®šä¹‰å–œå¥½å’Œå…´è¶£ã€‚åœ¨è¿›å…¥ä¸€ä¸ªä½ç½®æ—¶ï¼Œ æ”¯æŒ AllJoyn çš„è®¾å¤‡å°†ä¼šç«‹å³å‘ç°å‘¨è¾¹æœ‰ç€å…±åŒå…´è¶£çš„åŒå¥½ï¼Œå¹¶ä¸å…¶å»ºç«‹é€šä¿¡ç½‘ç»œä»¥å®ç°é€šä¿¡åŠä¿¡æ¯äº¤æ¢ã€‚

ç°å¦‚ä»Šå¤§å¤šæ•°è®¾å¤‡éƒ½å·²é›†æˆ Wi-Fiï¼Œå¦‚æ­¤ï¼Œå½“ä¸¤åç”¨æˆ·æ­¥å…¥å¸¦æœ‰ Wi-Fi çƒ­ç‚¹çš„ä½å®…æˆ–åŠå…¬å®¤æ—¶ï¼Œä»–ä»¬çš„è®¾å¤‡å¯è¿æ¥åˆ°æ¥è§¦ç½‘ç»œæ¥å…¥ç‚¹ï¼Œå¹¶å…¬ å¼€åˆ©ç”¨é™„åŠ çš„ç½‘ç»œå®¹é‡ã€‚æ­¤å¤–ï¼Œè¿™äº›è®¾å¤‡è¿˜å¯ä»¥åœ¨å…¶å¯è§åŸŸå†…ï¼ˆå–å†³äºWi-Fiçš„è¦†ç›–é¢ç§¯ï¼‰å¯¹å…¶ä»–è®¾å¤‡è¿›è¡Œå®šä½ï¼ŒåŒæ—¶å¯é€‰æ‹©å‘ç°å¹¶ä½¿ç”¨å…¶ä»– è®¾å¤‡æä¾›çš„å„ç§æœåŠ¡ã€‚è¿›ä¸€æ­¥ï¼Œå€ŸåŠ©æ··åˆæ‹“è¡¥ç»“æ„ï¼Œå¯ä»¥å°†ä¸€ä¸ªåº”ç”¨äº† AllJoyn Thinåº“çš„è®¾å¤‡å®šä¹‰ä¸ºåº”ç”¨è“ç‰™çš„ä¼ è¾“æœºï¼Œç”±æ­¤ä¾¿å¯ä¸å…¶ä»–è¿ æ¥åˆ° Wi-Fi çš„è®¾å¤‡çš„åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’ã€‚

å¦å¤–ä¸€ä¸ªä¾‹å­æ˜¯åœ¨å®æ—¶å¤šç©å®¶æ¸¸æˆä¸Šçš„åº”ç”¨ã€‚ä¾‹å¦‚ï¼Œä¸€æ¬¾å¤šç©å®¶æ¸¸æˆå¯ä»¥è¿è¡Œåœ¨è¯¸å¦‚ç¬”è®°æœ¬ç”µè„‘ï¼Œå¹³æ¿ç”µè„‘ä»¥åŠæ‰‹æŒè®¾å¤‡ä¸Šï¼ŒåŸºç¡€ç½‘ç»œæŠ€æœ¯ï¼ˆä¾‹å¦‚ Wi-Fiï¼‰ä¹Ÿä¸å°½ç›¸åŒã€‚è¿™äº›æ‰€æœ‰çš„åŸºç¡€è®¾æ–½ç»†èŠ‚ç®¡ç†éƒ½å¯ä»¥ç»ç”± AllJoyn æ¶æ„å¤„ç†ï¼Œè¿™ä½¿å¾—æ¸¸æˆä½œè€…å¯ä»¥å°†å…¨éƒ¨ç²¾åŠ›æŠ•å…¥æ¸¸æˆè®¾è®¡ä¸ ä¸å®ç°ä¸Šï¼Œè€Œä¸å¿…è€ƒè™‘ç‚¹å¯¹ç‚¹ç½‘ç»œçš„å¤æ‚åº¦ã€‚

ä½œä¸º AllJoyn ç”Ÿæ€ç³»ç»Ÿçš„å»¶ä¼¸ï¼Œ è¿˜æœ‰å¾ˆå¤šåº”ç”¨ç¨‹åºåˆ›æ„ã€‚ä¾‹å¦‚ï¼š

* åˆ›å»ºä¸€ä¸ªéŸ³ä¹æ’­æ”¾åˆ—è¡¨ï¼Œå°†æ­Œæ›²å…±äº«åˆ°æ”¯æŒ AllJoyn çš„è½¦è½½éŸ³å“ç³»ç»Ÿä¸­ï¼Œæˆ–è€…å°†æ­Œæ›²å‚¨å­˜åˆ°å®¶åº­éŸ³å“ä¸­ ï¼ˆå—åˆ°æ•°å­—ç‰ˆæƒä¿æŠ¤ï¼‰ã€‚
* åœ¨æ´»åŠ¨æˆ–æ—…ç¨‹ç»“æŸåçš„çš„è¿”ç¨‹è·¯ä¸Šï¼Œå°†ç…§ç‰‡æˆ–å…¶ä»–åª’ä½“æ–‡ä»¶åŒæ­¥è‡³æ”¯æŒ AllJoyn çš„ç”µè§†ä¸­
* è¿œç¨‹æ§åˆ¶å®¶ç”¨ç”µå™¨ï¼Œä¾‹å¦‚ç”µè§†æœºï¼Œæ•°å­—ç›‘æ§ç³»ç»Ÿï¼Œæ¸¸æˆæœºç­‰ã€‚
* åœ¨å±€åŸŸç½‘å†…ä¸ç¬”è®°æœ¬ç”µè„‘å’Œå°å¼æœºäº’åŠ¨å¹¶åˆ†äº«å†…å®¹ã€‚
* åœ¨ä¼ä¸šæˆ–æ•™è‚²åœºæ™¯ä¸­ï¼Œå®ŒæˆåŒäº‹æˆ–å­¦ç”Ÿä¹‹é—´é¡¹ç›®åˆä½œã€‚
* æä¾›é€‚åœ°æ€§æœåŠ¡ï¼Œä¾‹å¦‚å‘æ”¾ä¼˜æƒ åˆ¸æˆ– vcards. 


## AllJoyn æ¶æ„çš„ä¼˜åŠ¿

ä¹‹å‰å·²æåŠï¼ŒAllJoyn æ¶æ„æ˜¯ä¸€ä¸ªå¹³å°æ— å…³çš„ç³»ç»Ÿï¼Œæ—¨åœ¨ç®€åŒ–åˆ†å¸ƒåœ¨å¼‚æ„åˆ†å¸ƒå¼ç³»ç»Ÿä¸Šçš„é‚»è¿‘ç½‘ç»œã€‚

å¼‚æ„åœ¨è¿™é‡Œä¸ä»…æŒ‡ä»£ä¸åŒè®¾å¤‡ï¼Œè¿˜æŒ‡è¿è¡Œåœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸Šï¼Œåº”ç”¨ä¸åŒé€šä¿¡æœºåˆ¶çš„ä¸åŒç§ç±»çš„è®¾å¤‡ï¼ˆä¾‹å¦‚ï¼Œä¸ªäººç”µè„‘ï¼Œæ‰‹æŒè®¾å¤‡ï¼Œå¹³æ¿ç”µè„‘ï¼Œæ¶ˆè´¹ç±»ç”µå­äº§å“ï¼‰ã€‚

### å¼€æº
AllJoyn æ¶æ„ä¸€è´¯æ˜¯å¼€æºå¼€å‘ã€‚æ‰€æœ‰çš„ AllJoyn ä»£ç åº“éƒ½å¼€æ”¾æ£€è§†å¹¶æ¬¢è¿å¼€å‘è€…è¿›è¡Œè¡¥å……å’Œå®Œå–„ã€‚å¦‚æœ AllJoyn æ¶æ„ç¼ºå¤±æŸä¸€åŠŸèƒ½ï¼Œä½ å¯ ä»¥æ·»åŠ ã€‚å¦‚æœä½ åœ¨åº”ç”¨ AllJoyn æ¡†æ¶æ—¶é‡åˆ°äº†å›°éš¾æˆ–è€…æŠ€æœ¯é—®é¢˜ï¼Œå¼€æºç¤¾åŒºä¸­çš„å…¶ä»–å‚ä¸è€…ä¼šåŠæ—¶æä¾›å–„æ„çš„å¸®åŠ©å’ŒæŒ‡å¯¼ã€‚AllJoyn çš„ä»£ç  åº“å¯ä»¥åœ¨ä»¥ä¸‹ç½‘å€è·å¾— (http://www.allseenalliance.org).

### æ“ä½œç³»ç»Ÿæ— å…³æ€§

AllJoyn æ¡†æ¶æ‰€æä¾›çš„æŠ½è±¡å±‚ä½¿å…¶ä»£ç å’Œåº”ç”¨ç¨‹åºå¯ä»¥åœ¨å¤šç§æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚æˆªæ­¢åˆ°æœ¬åè®®ç¼–å†™æ—¶ï¼ŒAllJoyn æ¡†æ¶å·²æ”¯æŒå¤§å¤šæ•° Linux å‘è¡Œç‰ˆåŒ…æ‹¬ Ubuntuï¼Œå¹¶å¯ä»¥è¿è¡Œåœ¨ Android 2.3 ï¼ˆå§œé¥¼ï¼‰ ä»¥åŠåç»­æ™ºèƒ½æ‰‹æœºå’Œå¹³æ¿ç”µè„‘ä¸Šã€‚AllJoyn æ¡†æ¶ä»£ç ä¹Ÿå¯è¿è¡Œåœ¨ä¼—å¤šæµè¡Œçš„å¾®è½¯ æ“ä½œç³»ç»Ÿç‰ˆæœ¬ä¸Šï¼ŒåŒ…æ‹¬ Windows XP, Windows 7, Windows RT, å’Œ Windows 8. æ­¤å¤–ï¼ŒAllJoyn æ¡†æ¶ä»£ç å¯è¿è¡Œåœ¨ Apple æ“ä½œç³»ç»Ÿ iOS ä»¥åŠ OS Xä¸Šï¼Œä»¥åŠè¯¸å¦‚ OpenWRT çš„åµŒå…¥å¼æ“ä½œç³»ç»Ÿã€‚

### è¯­è¨€æ— å…³æ€§

å¼€å‘è€…ç›®å‰ä½¿ç”¨ C++,Java, C#, JavaScript ä»¥åŠ Objective-C è¯­è¨€æ¥åˆ›å»ºåº”ç”¨ç¨‹åºã€‚

### ç‰©ç†ç½‘ç»œåŠåè®®æ— å…³æ€§

ç›®å‰æœ‰è®¸å¤šå¯ä¾›è”ç½‘è®¾å¤‡ä½¿ç”¨çš„æŠ€æœ¯ã€‚AllJoyn æ¡†æ¶æä¾›çš„æŠ½è±¡å±‚å®šä¹‰äº†æ¥å…¥åˆ°åŸºç¡€ç½‘ç»œç«™çš„æ¸…æ™°æ¥å£ï¼Œä½¿å¾—ä¸»ç®¡è½¯ä»¶å·¥ç¨‹å¸ˆæ·»åŠ æ–°çš„ç½‘ç»œ å®ç°å·¥å…·å˜å¾—ç›¸å¯¹å®¹æ˜“ã€‚

ä¾‹å¦‚ï¼Œæˆªæ­¢æœ¬åè®®ç¼–å†™æ—¶ï¼ŒWi-Fi è”ç›Ÿå·²ç»å‘å¸ƒäº†æ”¯æŒç‚¹å¯¹ç‚¹è¿æ¥çš„ Wi-Fi Direct æŠ€æœ¯çš„å‚æ•°æ˜ç»†ã€‚Wi-Fi Direct çš„ç½‘ç»œæ¨¡å—æ­£åœ¨å¯†é›†çš„ è¢«å¼€å‘ï¼Œå¾ˆæ˜æ˜¾ä»–ä¼šå°† Wi-Fi Direct ä»¥åŠé¢„å…ˆå…³è”çš„å‘ç°æœºåˆ¶åŠ å…¥åˆ°å¯é€‰ç½‘ç»œé€‰é¡¹ä¸­ï¼Œä¾› AllJoyn çš„å¼€å‘è€…é€‰æ‹©ã€‚

### åŠ¨æ€é…ç½®

ç§»åŠ¨è®¾å¤‡åœ¨å…¶å¯¿å‘½ä¸­å¸¸ä¼šç»è¿‡å¤šé‡åœ°ç‚¹ï¼Œç½‘ç»œå…³è”å»ºç«‹ååˆæ–­å¼€ã€‚è¿™æ„å‘³ç€ IPï¼ˆInternet Protocalï¼‰åœ°å€ä¼šå‘ç”Ÿå˜åŒ–ï¼Œç½‘ç»œæ¥å£ä¼šå¤±æ•ˆ ï¼ŒæœåŠ¡ä¹Ÿä¼šä¸ç¨³å®šã€‚

å½“æ—§æœåŠ¡å¤±æ•ˆä»¥åŠæ–°æœåŠ¡å‡ºç°æ—¶ï¼ŒAllJoyn æ¡†æ¶ä¼šå‘å‡ºæé†’ï¼Œå¦‚æœ‰å¿…è¦ä¹Ÿå°†å»ºç«‹æ–°çš„å…³è”ã€‚AllJoyn æ¡†æ¶å·²åšå¥½æˆä¸ºWi-Fi Hotspot 2.0 ï¼ˆä½¿ç§»åŠ¨ç”µè¯ï¼Œç§»åŠ¨åŸºç«™ä¸ Wi-Fi çƒ­ç‚¹é€æ˜è¿æ¥çš„æŠ€æœ¯ï¼‰åº”ç”¨å±‚çš„å‡†å¤‡ã€‚

### å¹¿å‘ŠæœåŠ¡åŠå‘ç°
æ— è®ºä½•æ—¶ï¼Œè®¾å¤‡çš„é€šä¿¡ä¸€å®šä¼´éšç€æœåŠ¡çš„æ¨å¹¿ä¸å‘ç°ã€‚åœ¨è¿‡å»çš„é™æ€ç½‘æ—¶ä»£ï¼Œè®¾å¤‡é—´çš„é€šä¿¡ç”±äººå·¥ç®¡ç†å‘˜åšå‡ºæ˜ç¡®çš„åˆ†é…å®ç°ã€‚ç°ä»Šæ—¶ä»£ï¼Œé›¶é…ç½®ç½‘ç»œçš„æ¦‚å¿µå·²ååˆ†æµè¡Œï¼Œç‰¹åˆ«æ˜¯å€ŸåŠ©äº Apple Bonjour ä»¥åŠ Microsoft Universal Plug and Play çš„å¸®åŠ©ã€‚

åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿè§åˆ°äº†å¦‚ Bluetooth Service Discovery Protocol çš„å·²ç»å­˜åœ¨çš„å‘ç°æœºåˆ¶ï¼Œä»¥åŠæ­£åœ¨å‘å±•çš„å¦‚ Wi-Fi Direct P2P çš„å‘ç°æœº
åˆ¶ã€‚AllJoyn æ¶æ„æä¾›æœåŠ¡æ¨å¹¿åŠå‘ç°çš„è™šæ‹ŸåŒ–ï¼Œä»¥ç®€åŒ–å®šä½åŠä½¿ç”¨æœåŠ¡çš„è¿‡ç¨‹ã€‚

### å®‰å…¨æ€§

åœ¨åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºä¸­ï¼Œå®‰å…¨æ€§çš„è‡ªç„¶æ¨¡å‹æ˜¯åº”ç”¨ç¨‹åºå¯¹åº”ç”¨ç¨‹åºçš„ã€‚ä¸å¹¸çš„äº‹ï¼Œåœ¨å¾ˆå¤šæƒ…å†µä¸‹ç½‘ç»œå®‰å…¨æ¨¡å‹å¹¶ä¸é€‚ç”¨äºæ­¤æ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œè“ç‰™åè®®åœ¨å®Œæˆè®¾å¤‡é…å¯¹æ—¶ï¼Œä¼šå°†åŒæ–¹è®¾å¤‡ä¸­çš„æ‰€æœ‰åº”ç”¨ç¨‹åºå…¨éƒ¨æˆæƒã€‚ä½†å¦‚æœåŒæ–¹è®¾å¤‡æ¯”è“ç‰™è€³æœºæ›´å¤æ‚ï¼Œå¦‚ä¸¤å°ç¬”è®°æœ¬ç”µè„‘é€šè¿‡è“ç‰™ç›¸è¿ï¼Œè¿™ç§æˆæƒæ¨¡å¼å°†ä¼šå˜å¾—ä¸ç†æƒ³ï¼Œè½¬è€Œéœ€è¦æ›´ç²¾ç»†çš„ç²’åº¦ã€‚AllJoyn æ¡†æ¶å¯å¯¹è¯¸å¦‚æ­¤ç±»å¼ºè°ƒåº”ç”¨å¯¹åº”ç”¨é€šä¿¡çš„å¤æ‚å®‰å…¨æ¨¡å‹æä¾›å¹¿æ³›æ”¯æŒã€‚

### å¯¹è±¡æ¨¡å‹ä»¥åŠè¿œç¨‹æ–¹æ³•è°ƒç”¨

AllJoyn æ¡†æ¶åº”ç”¨äº†ç®€å•æ˜äº†çš„å¯¹è±¡æ¨¡å‹ä»¥åŠè¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼ˆ RMI ï¼‰æœºåˆ¶ã€‚AllJoyn æ¨¡å¼é‡æ–°å®ç°å¹¶æ‰©å±•äº† D-Bus æ ‡å‡†å®šä¹‰çš„æœ‰çº¿åè®®ï¼Œä»¥å®ç°å¯¹åˆ†å¸ƒå¼è®¾å¤‡çš„æ”¯æŒã€‚


### è½¯ä»¶å…ƒä»¶

ä¼´éšç€æ ‡å‡†åŒ–å¯¹è±¡æ¨¡å‹å’Œæœ‰çº¿åè®®ï¼Œéšä¹‹è€Œæ¥æ˜¯å°†å„ç±»æ¥å£æ ‡å‡†åŒ–ä¸ºå…ƒä»¶çš„èƒ½åŠ›ã€‚ä¸ Java æ¥å£å£°æ˜æœºåˆ¶æ‰€æä¾›çš„ä¸æœ¬åœ°å®ä¾‹äº¤äº’åŠŸèƒ½çš„å® ç°è§„èŒƒç±»ä¼¼ï¼ŒAllJoyn çš„å¯¹è±¡æ¨¡å‹æä¾›äº†ä¸ç¼–ç¨‹è¯­è¨€æ— å…³çš„ï¼Œä¸è¿œç¨‹å®ç°äº¤äº’çš„è§„èŒƒã€‚

æœ‰äº†æˆå‹çš„è§„èŒƒï¼Œå°±å¯ä»¥è€ƒè™‘ä¼—å¤šæ¥å£çš„å®ç°ï¼Œä»è€Œä½¿åº”ç”¨ç¨‹åºé€šä¿¡çš„æ ‡å‡†å»ºç«‹å˜å¾—å¯è¡Œã€‚è¿™é¡¹æŠ€æœ¯å¯¹è½¯ä»¶ç»„ä»¶å¾ˆæœ‰å¸®åŠ©ã€‚è½¯ä»¶éƒ¨åˆ†æ˜¯è®¸å¤šç°ä»£ç³»ç»Ÿçš„ä¸­å¿ƒï¼Œåœ¨ç±»ä¼¼ Android çš„ç³»ç»Ÿä¸­åˆ™æ›´ä¸ºæ˜æ˜¾ã€‚åœ¨ Android ä¸­å®šä¹‰äº†4ç§ä¸»è¦æˆåˆ†ç±»å‹ï¼Œä½œä¸ºä»…æœ‰çš„èƒ½æ¥å…¥ Android Application Framework çš„æ–¹å¼ï¼ŒåŒç†åœ¨å¾®è½¯ç³»ç»Ÿä¸­ï¼ŒComponent Object Model ï¼ˆ COM ï¼‰çš„ç»§ä»»ç‰ˆæœ¬è¢«ç”¨ä½œæ­¤åŠŸèƒ½ã€‚

ä¸ºäº†å®ç°åœ¨ [æ¦‚è¿°][overview]ä¸­æ‰€æç»˜çš„åœºæ™¯ï¼Œæˆ‘ä»¬æœŸç›¼æ¥å£å®šä¹‰å°†ä¼šå‡ºç°ä¸°å¯Œçš„â€œæµ·æ´‹â€ã€‚ AllJoyn é¡¹ç›®æœŸæœ›èƒ½ä¸ä¼—å¤šç”¨æˆ·ä¸€èµ·å®Œæˆæ¥å£ çš„å®šä¹‰ä¸æ ‡å‡†åŒ–ï¼Œå¹¶ååŠ©å®ç°æ–¹æ³•çš„å…±äº«ã€‚

## æ¦‚å¿µæ€§æ¦‚è¿°

AllJoyn æ¶æ„åŒ…å«ä¸€ç³»åˆ—å¯ä¾›ä½¿ç”¨çš„æŠ½è±¡å±‚ä»¥ä¾¿äºç†è§£å¹¶å°†å­æ¨¡å—å…³è”èµ·æ¥ã€‚å…¶ä¸­åªæœ‰å¾ˆå°éƒ¨åˆ†çš„æŠ½è±¡å±‚æ˜¯ç†è§£åŸºäº AllJoyn çš„ç³»ç»Ÿæ‰€å¿…é¡»çš„ã€‚

è¿™ä¸€ç« æä¾›äº†ä¸€ä¸ª AllJoyn æ¶æ„é«˜å±‚æ¬¡çš„è§†è§’ä¸ºä¹‹åçš„æ–‡æ¡£å¦‚ API è¯¦è§£æä¾›å¿…è¦çš„åŸºç¡€ã€‚

### è¿œç¨‹æ–¹æ³•è°ƒç”¨

åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯ä»¥å®ŒæˆåŒä¸€ç›®æ ‡ä¸ºç›®çš„çš„ä½¿ç”¨ä¸€å®šå½¢å¼çš„ç½‘ç»œè¿æ¥èµ·æ¥çš„ç‹¬ç«‹è®¡ç®—æœºç¾¤ï¼Œå› æ­¤éœ€è¦æœ‰ä¸€å°æœºå™¨ä¸Šçš„ä¸€å®šåœ°å€ç©ºé—´ä¸‹çš„æŸä¸ªç¨‹åºä»¥ç±»ä¼¼äºæœ¬åœ°è°ƒç”¨çš„æ–¹å¼ä½¿ç”¨ä½äºå¦ä¸€å°ç‰©ç†åˆ†ç¦»çš„æœºå™¨ä¸Šçš„ä¸€ä¸ªåœ°å€ç©ºé—´ä¸‹çš„è¿›ç¨‹çš„èƒ½åŠ›ã€‚è¿™é€šå¸¸æ˜¯é€šè¿‡è¿œç¨‹å‡½æ•°è°ƒç”¨ï¼ˆRPCï¼‰æˆ–è€…ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼æ¥è¯´ç§°ä½œè¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼ˆRMIï¼‰æˆ–è¿œç¨‹è°ƒç”¨ï¼ˆRIï¼‰çš„æ–¹å¼æ¥å®Œæˆã€‚

RPC çš„æ¨¡å‹é€šå¸¸éœ€è¦ä¸€ä¸ªå®¢æˆ·ç«¯ä¹Ÿå°±æ˜¯ RPC çš„è°ƒç”¨è€…å’Œä¸€ä¸ªæœåŠ¡å™¨ç«¯ï¼ˆAllJoynæ¨¡å‹ä¸­ç§°ä¸ºæœåŠ¡å™¨ï¼‰ä¹Ÿå°±æ˜¯å®é™…ä¸Šæ‰§è¡Œæ‰€æœŸæœ›çš„è¿œç¨‹å‡½æ•°çš„ ç¨‹åºã€‚è°ƒç”¨è€…æ‰§è¡Œä¸€ä¸ªçœ‹ä¸Šå»å’Œæœ¬åœ°ç³»ç»Ÿä¸Šçš„å‡½æ•°ä¸€æ ·çš„å®¢æˆ·ç«¯çš„å­˜æ ¹ï¼Œå®ƒä¼šå°†å‡½æ•°çš„å‚æ•°è¿›è¡Œæ‰“åŒ…ï¼ˆç§°ä¸ºå¯¹å‚æ•°çš„ç¼–ç»„æˆ–ä¸²è¡ŒåŒ–ï¼‰ä¸ºæŸä¸ªæ ¼å¼çš„æ¶ˆæ¯ç„¶åå‘é€ç»™ RPC ç³»ç»Ÿå°†å…¶é€šè¿‡å¦‚ä¼ è¾“æ§åˆ¶åè®®ï¼ˆTCPï¼‰ä¸€ç±»çš„æ ‡å‡†æœº åˆ¶é€è¾¾æœåŠ¡ç«¯ã€‚åœ¨è¿œç«¯æœºå™¨ä¸Šä¼šæœ‰ç›¸åº”çš„ RPC ç³»ç»Ÿåœ¨è¿è¡Œ ï¼Œå‚æ•°å°†ä¼šè¢«åç¼–ç»„ï¼ˆååºåˆ—åŒ–ï¼‰å¹¶å°†æ¶ˆæ¯å‘é€ç»™æœåŠ¡ç«¯å­˜æ ¹ï¼Œå®ƒä¼šå®‰æ’æ‰§è¡ŒæœŸæœ›çš„å‡½æ•°ã€‚å¦‚æœè¢«è°ƒç”¨çš„å‡½æ•°éœ€è¦è¿”å›ä»»ä½•ä¿¡æ¯ï¼Œä¼šä½¿ç”¨ç›¸ä¼¼çš„è¿‡ç¨‹å°†è¿”å›å€¼è½¬è¿ç»™å®¢æˆ·ç«¯å­˜æ ¹å¹¶å°†å…¶å‘é€ç»™åŸå§‹çš„è°ƒç”¨è€…ã€‚


æ³¨æ„è¿™é‡Œå¹¶æ²¡æœ‰è¦æ±‚ä¸€ä¸ªå®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯åŠŸèƒ½åªèƒ½åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å®ç°ã€‚å¦‚æœä¸¤ä¸ªæˆ–æ›´å¤šçº¿ç¨‹å®ç°åŒä¸€ä¸ªå®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯åŠŸèƒ½çš„æŸä¸ªæ–¹é¢ï¼Œè¿™äº›çº¿ç¨‹è¢«çœ‹æˆç«¯ç‚¹ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ AllJoyn åº”ç”¨ä¼šå®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼Œè¿™æ—¶å®ƒä»¬ä¹Ÿä¼šè¢«ä½œä¸ºç«¯ç‚¹æ¥çœ‹å¾…ã€‚AllJoyn æ¶æ„èƒ½å¤Ÿæ”¯æŒç»å…¸çš„å®¢æˆ·ç«¯ å’ŒæœåŠ¡å™¨ç«¯çš„åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒç«¯åˆ°ç«¯çš„ç½‘ç»œåŠŸèƒ½ã€‚

### AllJoyn bus
AllJoyn ç³»ç»Ÿä¸­æœ€åŸºæœ¬çš„æŠ½è±¡æ¦‚å¿µå°±æ˜¯ AllJoyn æ€»çº¿ã€‚å®ƒæä¾›äº†ä¸€ä¸­å¿«é€Ÿè½»é‡çš„æ–¹æ³•åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¼ è¾“ç¼–ç»„è¿‡çš„æ¶ˆæ¯ã€‚å¯ä»¥å°† AllJoyn æ€»çº¿çœ‹æˆæ˜¯ä¸€ç§æ¶ˆæ¯æµçš„â€œé«˜é€Ÿå…¬è·¯â€ã€‚ä¸‹å›¾ä»æ¦‚å¿µä¸Šå±•ç¤ºäº†ä¸€ä¸ª AllJoyn æ€»çº¿åœ¨åŒä¸€ä¸ªè®¾å¤‡ä¸Šçš„å®ä¾‹ã€‚

![prototypical-alljoyn-bus][prototypical-alljoyn-bus]

**Figure:** Prototypical AllJoyn bus

AllJoyn æ€»çº¿åŸç†ä¸Šè®²åŒ…å«ä¸€ä¸‹å‡ ç‚¹ï¼š
 â€¢ å›¾ä¸­è¾ƒç²—çš„é»‘è‰²æ¨ªçº¿è¡¨ç¤ºæ€»çº¿è‡ªèº«ï¼Œç«–çº¿å¯ä»¥è¢«ç†è§£ä¸ºæµç»æ€»çº¿çš„æ¶ˆæ¯æµçš„æºå¤´å’Œ/æˆ–ç›®çš„åœ°â€œå‡ºå£â€ã€‚
 â€¢ ä¸æ€»çº¿çš„è¿æ¥ç”¨å…­è¾¹å½¢è¡¨ç¤ºã€‚å’Œé«˜é€Ÿå…¬è·¯ä¸Šçš„å‡ºå£é€šå¸¸ä¼šè¢«ç¼–å·ç±»ä¼¼ï¼Œæ¯ä¸€ä¸ªè¿æ¥ä¼šè¢«èµ‹äºˆä¸€ä¸ªå”¯ä¸€çš„åå­—ã€‚å›¾ä¸­ä½¿ç”¨äº†ç®€åŒ–çš„å½¢å¼æ¥å‘½åè¿æ¥ç”¨ä»¥è¯´æ˜ã€‚
 â€¢ åœ¨å¾ˆå¤šæƒ…å†µä¸‹åˆ°æ€»çº¿çš„è¿æ¥å¯ä»¥è¢«è®¤ä¸ºæ˜¯å’Œçº¿ç¨‹å…±é©»å†…å­˜çš„ã€‚å› æ­¤ï¼Œå”¯ä¸€è¿æ¥å:1.1å¯èƒ½è¢«èµ‹äºˆç»™äº†ä¸€ä¸ªè¿è¡Œç€æŸä¸ªåº”ç”¨å®ä¾‹çš„çº¿ç¨‹æ‰€åœ¨çš„è¿æ¥ï¼Œè€Œå”¯ä¸€è¿æ¥å:1.4å¯èƒ½è¢«èµ‹äºˆç»™äº†å¦ä¸€ä¸ªè¿è¡Œç€æŸä¸ªåº”ç”¨å®ä¾‹çš„çº¿ç¨‹æ‰€åœ¨çš„è¿æ¥ã€‚AllJoyn æ€»çº¿çš„ç›®æ ‡å°±æ˜¯ä½¿ä¸¤ä¸ªåº”ç”¨å¯ä»¥åœ¨ä¸ éœ€è¦å¤„ç†åº•å±‚å…·ä½“çš„äº¤æ¢æœºåˆ¶çš„æƒ…å†µä¸‹è¿›è¡Œé€šä¿¡ã€‚ä¸€ç«¯çš„è¿æ¥å¯ä»¥è¢«è®¤ä¸ºæ˜¯å®¢æˆ·ç«¯å­˜æ ¹è€Œå¦ä¸€ç«¯åˆ™å®Œæˆæ‰€æœ‰æœåŠ¡ç«¯å­˜æ ¹æ‰€è¦æ±‚çš„æ‰€æœ‰ä»»åŠ¡ã€‚

åŸå§‹çš„ AllJoyn æ€»çº¿å›¾è¡¨è¾¾äº†ä¸€ä¸ª AllJoyz æ€»çº¿çš„æ¡ˆä¾‹ï¼Œå¹¶æç»˜äº†è½¯ä»¶æ€»çº¿ä¸ºæ¥é©³åœ¨å…¶ä¸Šçš„ä¸åŒç»„ä»¶æä¾›è¿›ç¨‹é—´é€šä¿¡çš„å…·ä½“å®ç°æ–¹æ³•ã€‚ä¸€
èˆ¬æƒ…å†µä¸‹ï¼Œ AllJoyn æ€»çº¿ä¼šè¢«å»¶ä¼¸åˆ°ä¸‹å›¾æ‰€ç¤ºçš„è®¾å¤‡ä¸­ã€‚å½“ç»„ä»¶éœ€è¦æ—¶ï¼Œä¸€æ¡é€šä¿¡é“¾è·¯ä¼šå»ºç«‹åœ¨åˆ†å¸ƒåœ¨æ™ºèƒ½æ‰‹æœºä¸Šçš„é€»è¾‘æ€»çº¿ç‰‡æ®µå’Œåˆ†å¸ƒåœ¨ Linux ä¸»æœºä¸Šçš„ç»„ä»¶ä¹‹é—´ã€‚

![device-device-comm][device-device-comm]

**Figure:** ç”± AllJoyn æ¡†æ¶æ“ä½œçš„è®¾å¤‡ä¸è®¾å¤‡é—´é€šä¿¡

æ­¤é€šä¿¡é“¾è·¯ç”± AllJoyn ç³»ç»Ÿç®¡ç†ï¼Œå¯ä»¥ç”±åº•å±‚æŠ€æœ¯å®ç°ï¼Œè¯¸å¦‚ Wi-Fi æˆ– Wi-Fi Direct. åœ¨ AllJoyn ä¸»çº¿ä¸Šä½œä¸ºä¸»æœºè¿è¡Œçš„è®¾å¤‡å¯ä»¥æœ‰å¤š
ä¸ªï¼Œä½†å¯¹äºåœ¨åˆ†å¸ƒå¼ä¸»çº¿ä¸Šçš„ç”¨æˆ·è¿™äº›ä¸»æœºæ˜¯é€æ˜çš„ã€‚ä»ä¸»çº¿çš„ä¸€ä¸ªç»„ä»¶çš„è§’åº¦çœ‹ï¼Œåˆ†å¸ƒå¼ AllJoyn ç³»ç»Ÿå°±åƒæ˜¯åœ¨è®¾å¤‡æœ¬åœ°çš„ä¸€æ¡ä¸»çº¿ã€‚

ä¸‹å›¾å±•ç¤ºäº†åˆ†å¸ƒå¼ä¸»çº¿åœ¨ç”¨æˆ·è§’åº¦å¯èƒ½å‘ˆç°çš„æ ·å­ã€‚ç»„ä»¶ï¼ˆä¾‹å¦‚æ ‡ç­¾ä¸º `:1.1`çš„æ™ºèƒ½æ‰‹æœºè¿æ¥ï¼‰å¯ä»¥å¯¹æ ‡ç­¾ä¸º`:1.7`çš„ Linux ä¸»æœºè¿›è¡Œè¿œ
ç¨‹æ–¹æ³•è°ƒç”¨ï¼Œè€Œæ— éœ€æ‹…å¿ƒè¯¥ç»„ä»¶æ‰€å¤„çš„ä½ç½®ã€‚

![dist-bus-local-bus][dist-bus-local-bus]

**Figure:** A distributed AllJoyn bus appears as a local bus

### æ€»çº¿è·¯ç”±

å°±åƒè®¾å¤‡å¯¹è®¾å¤‡é€šä¿¡å›¾æç»˜çš„é‚£æ ·ï¼Œé€»è¾‘åˆ†å¸ƒå¼æ€»çº¿ä¼šè¢«åˆ†ä¸ºæ•°ä¸ªç‰‡æ®µï¼Œæ¯ä¸€ç‰‡éƒ½è¿è¡Œåœ¨ä¸åŒçš„è®¾å¤‡ä¸Šã€‚åœ¨ AllJoyn ä¸­ï¼Œå®ç°å¯¹é€»è¾‘æ€»çº¿åˆ†
å‰²åŠŸèƒ½çš„è®¾å¤‡è¢«ç§°ä½œ AllJoyn è·¯ç”±ã€‚

å®ˆæŠ¤è¿›ç¨‹åœ¨ç”± Unix è¡ç”Ÿå‡ºçš„ç³»ç»Ÿä¸­å¾ˆå¸¸è§ï¼Œä»–è¢«ç”¨äºæè¿°ä¸ºç”µè„‘ç³»ç»Ÿæä¾›é‡è¦åŠŸèƒ½æ€§çš„ä¸€äº›ç¨‹åºã€‚åœ¨ Linux ç³»ç»Ÿä¸­æˆ‘ä»¬å°† daemon ç§°ä¸º
ç‹¬ç«‹è·¯ç”±ã€‚åœ¨ Windows ç³»ç»Ÿä¸­æ›´å€¾å‘äºç”¨â€œæœåŠ¡â€è¿™ä¸ªè¯ï¼Œä½†æˆ‘ä»¬ç”¨ AllJoyn è·¯ç”±æ¥æè¿°ä»–ã€‚

![æ€»çº¿æ³¡æ³¡å›¾][bubble-diagram-bus]

**Figure:** ç›¸å…³çš„æ€»çº¿æ³¡æ³¡å›¾

åˆ›å»ºæ³¡æ³¡å›¾å¯ä»¥ä½¿ AllJoyn è·¯ç”±å¯è§†åŒ–ã€‚å¦‚ä¹‹å‰çš„å›¾æ‰€ç¤ºï¼Œä¸¤ä¸ª AllJoyn æ€»çº¿ç‰‡æ®µåˆ†åˆ«ä½äºæ™ºèƒ½æ‰‹æœºå’Œ Linux ä¸»æœºä¸Šã€‚æˆ‘ä»¬ç”¨æˆ·ï¼ˆ C ï¼‰ä»¥åŠæœåŠ¡ï¼ˆ S ï¼‰æ¥æ ‡æ³¨åˆ°æ€»çº¿çš„è¿æ¥ï¼Œè¿™é‡Œç”¨åˆ°äº† RMI ä¸­ çš„ç”¨æˆ·ï¼æœåŠ¡ç†å¿µæ¨¡å‹ã€‚å®ç°æ ¸å¿ƒåˆ†å¸ƒå¼æ€»çº¿åŠŸèƒ½çš„ AllJoyn è·¯ç”±è¢«æ ‡è®°
ä¸º ï¼ˆ D ï¼‰ã€‚å›¾ä¸­çš„ç»„ä»¶è¢«è½¬æ¢æˆä¸‹å›¾ä¸­çš„å›¾æ ‡ã€‚

![alljoyn æ³¡æ³¡å›¾][alljoyn-bubble-diagram]

**Figure:** AllJoyn æ³¡æ³¡å›¾

å›¾ä¸­çš„æ³¡æ³¡å¯è¢«çœ‹ä½œæ˜¯è¿è¡Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸Šçš„ç”µè„‘è¿›ç¨‹ã€‚å·¦è¾¹çš„ä¸¤ä¸ªç”¨æˆ·ï¼ˆ C ï¼‰å’ŒæœåŠ¡ï¼ˆ S ï¼‰è¿›ç¨‹è¿è¡Œåœ¨æ™ºèƒ½æ‰‹æœºä¸Šã€‚ä½äºå³ä¾§çš„è·¯ç”± å™¨ç”¨äºå®ç°åœ¨ Linux ä¸»æœºä¸Šçš„ AllJoyn æ€»çº¿çš„æœ¬åœ°ç‰‡æ®µã€‚

å¦‚åˆ†å¸ƒå¼ AllJoyn æ€»çº¿å›¾æ‰€ç¤ºï¼Œè¿™ä¸¤ä¸ªè·¯ç”±ç‚¹åè°ƒç€è·¨è¶Šé€»è¾‘æ€»çº¿çš„æ¶ˆæ¯æµï¼Œå‘ˆç°åˆ°è¿æ¥ä¸Šçš„åˆ™æ˜¯ä¸€ä¸ªæ•´ä½“ã€‚ä¸æ™ºèƒ½æ‰‹æœºç«¯çš„é…ç½®ç›¸åŒï¼Œåœ¨ Linux ä¸»æœºä¸ŠåŒæ ·è®¾æœ‰ä¸¤ä¸ªæœåŠ¡ç»„ä»¶å’Œä¸€ä¸ªç”¨æˆ·ç»„ä»¶ã€‚


åœ¨è¿™ç§é…ç½®ä¸­ï¼Œç”¨æˆ·ç»„ä»¶ C1 å¯ä»¥å¯¹æœåŠ¡ç»„ä»¶ S1 è¿›è¡Œè¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼Œå°±åƒæ“ä½œæœ¬åœ°å¯¹è±¡é‚£æ ·ä¸€æ ·ã€‚åºåˆ—åŒ–çš„å‚æ•°ç”±æºå¤´è¢«è¿è¡Œåœ¨æ™ºèƒ½æ‰‹æœºä¸Š
çš„è·¯ç”±å™¨ä¼ é€å‡ºæœ¬åœ°æ€»çº¿ç‰‡æ®µã€‚ç»è¿‡ç½‘ç»œé“¾è·¯ï¼ˆå¯¹ç”¨æˆ·é€æ˜ï¼‰å‘é€åˆ° Linux ä¸»æœºçš„è·¯ç”±ç‚¹ã€‚Linux ä¸»æœºä¸Šçš„ AllJoyn è·¯ç”±è¯†åˆ«å‡ºå‚æ•°ç›®çš„åœ°
ä¸º S1ï¼Œéšåå°†å‚æ•°è§£åºåˆ—åŒ–å¹¶æ‰§è¡Œè¿œç¨‹æ–¹æ³•è°ƒç”¨ã€‚å¦‚æœéœ€è¦è¿”å›å€¼ï¼Œæ­¤è¿›ç¨‹å¯è¢«åè½¬ï¼Œå°†è¿”å›å€¼é€å›å®¢æˆ·ç«¯ã€‚

ç”±äºç‹¬ç«‹è·¯ç”±è¿è¡Œåœ¨åå°è¿›ç¨‹ä¸­ï¼Œä¸åŒäºç”¨æˆ·ä¸æœåŠ¡æ‰€åœ¨çš„è¿›ç¨‹ï¼Œåœ¨æ¯ä¸€ä¸ªè¿›ç¨‹ä¸­éœ€è¦æœ‰ä¸€ä¸ªè·¯ç”±â€œä»£è¡¨â€ã€‚åœ¨ AllJoyn æ¡†æ¶ä¸­è¿™äº›ä»£è¡¨è¢«ç§°
ä¸ºæ€»çº¿é™„ä»¶ã€‚


### æ€»çº¿é™„ä»¶

æ¯ä¸€ä¸ªåˆ° AllJoyn æ€»çº¿çš„è¿æ¥éƒ½ä¼šç»è¿‡ç‰¹å®šçš„ AllJoyn ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶è¢«ç§°ä½œæ€»çº¿é™„ä»¶ã€‚æ€»çº¿é™„ä»¶å­˜åœ¨äºæ¯ä¸€ä¸ªéœ€è¦è¿æ¥åˆ° AllJoyn è½¯ä»¶
æ€»çº¿çš„è¿›ç¨‹å½“ä¸­ã€‚

å½“è®¨è®ºè½¯ä»¶ç»„ä»¶æ—¶ï¼Œå¸¸ä¼šåœ¨è½¯ä»¶å’Œç¡¬ä»¶ä¹‹é—´åšä¸€ä¸ªç±»æ¯”ã€‚åˆ†å¸ƒå¼ AllJoyn æ€»çº¿ä¸Šçš„æœ¬åœ°ç‰‡æ®µå°±åƒæ˜¯å°å¼æœºä¸Šçš„ç¡¬ä»¶èƒŒæ¿æ€»çº¿ã€‚ç¡¬ä»¶æ€»çº¿å¯ä¼ 
é€ç”µå­ä¿¡å·ï¼Œä¸å…¶ä»–å¡ç‰‡æœ‰è¢«ç§°ä¸ºè¿æ¥ä½“çš„æ¥é©³ç‚¹ã€‚ç±»æ¯”äºç¡¬ä»¶ï¼ŒAllJoyn æ¡†æ¶ä¸­çš„æ€»çº¿é™„ä»¶å°±åƒç¡¬ä»¶ä¸­çš„è¿æ¥ä½“ã€‚

AllJoyn æ€»çº¿é™„ä»¶æ˜¯ä¸€ä¸ªå·²å®šä¹‰è¯­è¨€çš„å¯¹è±¡ï¼Œå¯¹äºå®¢æˆ·ç«¯ï¼ŒæœåŠ¡æˆ–è€…ä¸€ä¸ªç‚¹ï¼Œä»–ä»£è¡¨ç€åˆ†å¸ƒå¼ AllJoyn æ€»çº¿ã€‚ä¾‹å¦‚ï¼ŒC++ è¯­è¨€ä¸­ä¸ºç”¨æˆ·æä¾›
äº†æ€»çº¿é™„ä»¶çš„ä¸€ç§å®ç°æ–¹æ³•ï¼Œåœ¨ Java ä¸­åˆ™æœ‰å¦ä¸€ç§å®ç°æ–¹æ³•æ¥å®ç°åŒä¸€æ€»çº¿é™„ä»¶ã€‚ç”±äº AllJoyn æ¡†æ¶æ·»åŠ äº†è¯­è¨€è”ç¼–ï¼Œæ›´å¤šå·²å®šä¹‰è¯­è¨€çš„ å®ç°æ–¹æ³•å°†ä¼šå‡ºç°ã€‚

### æ€»çº¿æ–¹æ³•ï¼Œæ€»çº¿å±æ€§åŠæ€»çº¿ä¿¡å·

AllJoyn æ¡†æ¶æ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç³»ç»Ÿã€‚åœ¨é¢å‘å¯¹è±¡çš„ç³»ç»Ÿä¸­ï¼Œæ€»ä¼šæåŠè°ƒç”¨å¯¹è±¡ä¸Šçš„æ–¹æ³• ï¼ˆå› æ­¤ï¼Œåœ¨æåŠåˆ†å¸ƒå¼ç³»ç»Ÿæ—¶ä¹Ÿå¸¸ä¼šæåŠè¿œç¨‹æ–¹æ³•
è°ƒç”¨ï¼‰ã€‚åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ç†å¿µä¸­ï¼Œå¯¹è±¡æœ‰ä¸€ç³»åˆ—æˆå‘˜ã€‚è¿™äº›å¯¹è±¡æ–¹æ³•æˆ–å±æ€§ï¼Œåœ¨ AllJoyn æ¡†æ¶ä¸­è¢«ç§°ä¸ºæ€»çº¿æ–¹æ³•å’Œæ€»çº¿å±æ€§ã€‚AllJoyn æ¡†æ¶
åŒæ—¶è¿˜æœ‰æ€»çº¿ä¿¡å·çš„æ¦‚å¿µï¼Œä½œä¸ºåœ¨å¯¹è±¡ä¸­ä¸€äº›é¡¹ç›®æˆ–çŠ¶æ€å˜åŒ–çš„å¼‚æ­¥æé†’ã€‚

ä¸ºäº†åšåˆ°å®¢æˆ·ï¼ŒæœåŠ¡ä¸ç‚¹ä¹‹é—´çš„é€šä¿¡å®‰æ’é€æ˜åŒ–ï¼Œè°ƒç”¨æ€»çº¿æ–¹æ³•å’Œæ€»çº¿ä¿¡å·çš„å‚æ•°ä¸€å®šè¦æœ‰è§„èŒƒï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å¯¹æ€»çº¿å±æ€§å®šä¹‰ä¸€äº›ç§ç±»ä¿¡æ¯ã€‚åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œè°ƒç”¨æ–¹æ³•æˆ–ä¿¡å·çš„è¾“å…¥å’Œè¾“å‡ºçš„ç±»å‹è¢«ç§°ä¸ºç±»å‹ç­¾åã€‚

ç±»å‹ç­¾åç”±å­—ç¬¦ä¸²å®šä¹‰ã€‚åŒæ—¶ç±»å‹ç­¾åå¯ä»¥æè¿°å­—ç¬¦ä¸²ï¼Œä»¥åŠæ‰€æœ‰ä¸»æµç¼–ç¨‹è¯­è¨€ä¸­çš„æ•°æ®ç±»å‹å’Œè¯¸å¦‚æ•°ç»„ï¼Œç»“æ„ä½“çš„å¤åˆç±»å‹ã€‚ç±»å‹ç­¾åçš„å…·ä½“ä»»åŠ¡åŠä½¿ç”¨å·²è¶…å‡ºäº†æ­¤ç¯‡ç®€ä»‹çš„ä»‹ç»èŒƒå›´ã€‚æ€»çš„æ¥è¯´ï¼Œæ€»çº¿æ–¹æ³•ï¼Œä¿¡å·æˆ–å±æ€§çš„ç±»å‹ç­¾åå¯ä»¥å‘ŠçŸ¥åº•å±‚ AllJoyn ç³»ç»Ÿå¦‚ä½•å°†ä¼ è¾“å‚æ•°å’Œè¿” å›å€¼ä»å·²åºåˆ—åŒ–çš„è¡¨è¾¾æ–¹å¼ä¸­è½¬æ¢è¿‡æ¥ã€‚

### æ€»çº¿æ¥å£

åœ¨å¤§å¤šæ•°é¢å‘å¯¹è±¡ç³»ç»Ÿå½“ä¸­ï¼Œæœ‰å†…åœ¨å…±æ€§çš„æ–¹æ³•é›†å’Œå±æ€§é›†ä¼šè¢«ç¼–å…¥å°ç»„ã€‚è¿™äº›åŠŸèƒ½ç»„çš„ç»Ÿä¸€æè¿°è¢«ç§°ä½œæ¥å£ã€‚æ¥å£æ˜¯ä¸€ä¸ªåœ¨å®ç°æ¥å£è§„èŒƒçš„
å®ä½“å’Œå¤–ç•Œä¸–ç•Œä¹‹é—´çš„å¥‘çº¦ã€‚ä¾æ­¤ï¼Œæ¥å£æ˜¯é€šè¿‡åˆé€‚çš„æ ‡å‡†æœºæ„çš„æ ‡å‡†åŒ–çš„å€™é€‰äººã€‚å„ç±»æœåŠ¡ï¼ˆä»ç”µè¯åˆ°åª’ä½“æ’­æ”¾æ§åˆ¶ï¼‰çš„æ¥å£çš„è§„èŒƒå¯ä»¥åœ¨ç½‘ç«™ä¸Šæ‰¾åˆ°ã€‚æ ¹æ® D-Bus è§„èŒƒï¼Œè¿™äº›æ¥å£ç”± XML æè¿°ã€‚

ä¸€ä¸ªæ¥å£å®šä¹‰å°†ä¸€ç»„ä¸»çº¿æ–¹æ³•ï¼Œä¸»çº¿ä¿¡å·å’Œä¸»çº¿å±æ€§ï¼Œä»¥åŠä»–ä»¬å¯¹åº”çš„ç±»å‹ç­¾åé›†æˆåˆ°ä¸€ä¸ªå·²å‘½åçš„ç»„ä¸­ã€‚åœ¨å®é™…æ“ä½œä¸­ï¼Œæ¥å£é€šå¸¸ç”±å®¢æˆ·ï¼ŒæœåŠ¡æˆ–è€…ç‚¹çš„è¿›ç¨‹å®ç°ã€‚å½“å·²å‘½åçš„æ¥å£è¢«å®ç°åï¼Œåœ¨å®ç°æ–¹å’Œå¤–ç•Œä¸–ç•Œä¹‹é—´å°†ç”Ÿæˆä¸€ä¸ªå†…å«çš„å¥‘çº¦ï¼Œå¹¶å°†æ”¯æŒæ‰€æœ‰è¯¥æ¥å£çš„æ€»çº¿æ–¹æ³•ï¼Œæ€»çº¿ä¿¡å·åŠæ€»çº¿å±æ€§ã€‚

æ¥å£åé€šå¸¸å–ç”¨åè½¬çš„åŸŸåã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª AllJoyn çš„æ ‡å‡†æ¥å£æ˜¯`org.alljoyn.Bus`æ¥å£ï¼Œç”±è·¯ç”±å™¨åˆ›å»ºï¼Œå¹¶ä¸ºæ€»çº¿é™„ä»¶æä¾›ä¸€äº›åŸºç¡€æœåŠ¡ã€‚

ç”±ä»»æ„å‘½åç©ºé—´çš„å­—ç¬¦ä¸²åˆ›å»ºæ¥å£åç§°æ˜¯ä¸å¯å–çš„ã€‚æ¥å£åç§°å­—ç¬¦ä¸²ä¸ºä¸€ä¸ªç‰¹å®šçš„æ–¹æ³•æœåŠ¡ï¼Œä¸å¯ä»¥ä¸å…¶ä»–ç›¸ä¼¼çš„å­—ç¬¦ä¸²ç›¸æ··æ·†ï¼Œå°¤å…¶æ˜¯ä¸»çº¿åç§°ã€‚ä¾‹å¦‚ï¼Œ`org.alljoyn.sample.chat` å¯ä»¥æ˜¯ä¸€ä¸ªæ’å®šä¸å˜çš„å¯ä»¥ç”±ç”¨æˆ·æœç´¢åˆ°çš„ä¸»çº¿åç§°ã€‚åŒæ—¶ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåœ¨æ€»çº¿å¯¹è±¡ä¸­å®šä¹‰äº†ä¸å·²å®šä¹‰äº†æ€»çº¿åç§°çš„æ€»çº¿é™„ä»¶ç›¸å…³çš„ï¼Œå¯ä½¿ç”¨çš„æ–¹æ³•ï¼Œä¿¡å·åŠå±æ€§çš„åå­—ã€‚è¢«èµ‹äºˆåç§°çš„æ¥å£çš„å­˜åœ¨æš—å«åœ¨ä¸»çº¿åç§°çš„å­˜åœ¨å½“ä¸­ï¼Œè™½ç„¶ä»–ä»¬æœ‰æ—¶çœ‹èµ·æ¥å®Œå…¨ç›¸åŒï¼Œä½†ä»–ä»¬æ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ç±»ã€‚


### æ€»çº¿å¯¹è±¡å’Œæ€»çº¿è·¯å¾„

æ€»çº¿æ¥å£ä¸ºå·¥ä½œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸Šçš„æ¥å£çš„å£°æ˜æä¾›äº†ä¸€ä¸ªæ ‡å‡†åŒ–çš„æ–¹å¼ã€‚æ€»çº¿å¯¹è±¡ä¸ºå®ç°ç»™å®šè§„èŒƒçš„æ¥å£æä¾›äº†è„šæ‰‹æ¶ã€‚æ€»çº¿å¯¹è±¡å­˜åœ¨äºæ€»çº¿é™„ä»¶ä¸­ï¼Œæ‰®æ¼”é€šä¿¡ç»ˆç‚¹çš„è§’è‰²ã€‚

ç”±äºå®ç°å­˜åœ¨äºä»»æ„ç»™å®šæ€»çº¿é™„ä»¶çš„æŒ‡å®šæ¥å£çš„æ–¹æ³•ä¸æ­¢ä¸€ç§ï¼Œæ­¤å¤„éœ€è¦ä¸€ä¸ªå¯ä»¥é€šè¿‡å¯¹è±¡è·¯å¾„å®ç°çš„é™„åŠ ç»“æ„ï¼Œç”¨ä»¥åŒºåˆ†è¿™äº›ä¸åŒçš„æ¥å£å®ç°æ–¹æ³•ã€‚

å°±åƒå­˜åœ¨äºæ¥å£å‘½åç©ºé—´çš„æ¥å£åå­—ç¬¦ä¸²ä¸€æ ·ï¼Œå¯¹è±¡è·¯å¾„ä¹Ÿå­˜åœ¨äºä¸€ä¸ªå‘½åç©ºé—´ä¸­ã€‚æ­¤å‘½åç©ºé—´è¢«è§„åˆ’ä¸ºä¸€ä¸ªæ ‘å‹ç»“æ„ï¼Œåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­å¯»æ‰¾è·¯å¾„çš„æ¨¡å‹åˆ™æ˜¯ä¸€ä¸ªç›®å½•æ ‘ã€‚äº‹å®ä¸Šï¼Œå¯¹è±¡è·¯å¾„çš„è·¯å¾„åˆ†éš”ç¬¦æ˜¯ä¸€ä¸ªæ­£æ–œæ  (/)ï¼Œä¸ Unix æ–‡ä»¶ç³»ç»Ÿä¸­ç›¸åŒã€‚ç”±äºæ€»çº¿å¯¹è±¡æ˜¯æ€»çº¿æ¥å£çš„å®ç°ï¼Œ
å¯¹è±¡è·¯å¾„å¯ä»¥ä¸å…¶ç›¸åº”æ¥å£çš„å‘½åè§„åˆ™ä¿æŒä¸€è‡´ã€‚

åœ¨å®šä¹‰ç£ç›˜æ§åˆ¶å™¨æ¥å£æ—¶ï¼ˆä¾‹å¦‚ï¼Œ`org.freedesktop.DeviceKit.Disks`ï¼‰ï¼Œå¯ä»¥æƒ³åƒç”±ä¸‹åˆ—å¯¹è±¡è·¯å¾„æ‰€æè¿°çš„å¤šé‡å®ç°æ–¹æ³•ï¼Œè¿™äº›è·¯å¾„å¯¹åº”ç€ä¸¤ä¸ªä¸åŒçš„ç‰©ç†ç£ç›˜æ¥å£ï¼š

```sh
/org/freedesktop/DeviceKit/Disks/sda1

/org/freedesktop/DeviceKit/Disks/sda2
```

### ä»£ç†ä¸»çº¿å¯¹è±¡

åœ¨ AllJoyn ä¸»çº¿ä¸Šçš„ä¸»çº¿å¯¹è±¡é€šè¿‡ä»£ç†è¢«è®¿é—®ã€‚ä»£ç†æ˜¯ä¸€ä¸ªå¯è¢«ä¸»çº¿è®¿é—®çš„è¿œç«¯å¯¹è±¡çš„æœ¬åœ°ä»£è¡¨ã€‚ä»£ç†å¹¶ä¸æ˜¯ç”± AllJoyn ç³»ç»Ÿæ‰€å®šä¹‰çš„ï¼Œè€Œ
æ˜¯ä¸€ä¸ªè¢«å¹¿æ³›åº”ç”¨çš„åè¯ã€‚åœ¨ AllJoyn æ¡†æ¶ä¸­ä½ ä¼šç»å¸¸é‡åˆ° ProxyBusObject è¿™ä¸ªè¯ï¼Œä»–æŒ‡ç¤ºç€ä»£ç†çš„ä¸€ä¸ªç‰¹å®šçš„æœ¬è´¨ï¼ä»–æ˜¯ä¸€ä¸ªè¿œç«¯æ€»çº¿
å¯¹è±¡çš„æœ¬åœ°ä»£ç†ã€‚

ProxyBusObject æ˜¯åº•å±‚çº§ AllJoyn ä»£ç çš„ä¸€éƒ¨åˆ†ï¼Œè´Ÿè´£å¯¹è±¡ä»£ç†åŸºæœ¬åŠŸèƒ½çš„è¿è¡Œã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒRMI ç³»ç»Ÿçš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªå®ç°æ¥å£çš„ä»£ç†ï¼Œä»–çœ‹èµ·æ¥ä¸å°†è°ƒç”¨è¿œç¨‹å¯¹è±¡çš„é‚£ä¸€ä¸ªéå¸¸ç›¸è¿‘ã€‚ä»£ç†å¯¹è±¡ä¸è¿œç¨‹å¯¹è±¡å®ç°åŒä¸€ä¸ªæ¥å£ï¼Œä½†è¿è¡Œä¸åŒçš„åºåˆ—åŒ–å‚æ•°ä»¥åŠå‘æœåŠ¡å‘é€æ•°æ®çš„è¿›ç¨‹ã€‚

åœ¨ AllJoyn æ¡†æ¶ä¸­ï¼Œç”¨æˆ·ä¸æœåŠ¡è½¯ä»¶å¸¸å¸¸é€šè¿‡ç‰¹å®šçš„ç¼–ç¨‹è¯­è¨€è”ç¼–æ¥å®ç°å…·ä½“çš„ç”¨æˆ·å±‚ä»£ç†å¯¹è±¡ã€‚ç”¨æˆ·å±‚çš„ä»£ç†å¯¹è±¡åˆ™é€šè¿‡ AllJoyn ä»£ç†æ€»çº¿è·¯å¾„çš„å®¹é‡æ¥å®ç°å±€éƒ¨é€æ˜ï¼è¿œç¨‹é€æ˜çš„ç›®æ ‡ã€‚

### æ€»çº¿åç§°

AllJoyn æ€»çº¿ä¸Šçš„è¿æ¥æ˜¯ä¸€ç§ç”¨æ¥å®ç°è¢«æ¥å£åæ‰€æè¿°çš„æ¥å£çš„æœåŠ¡ã€‚æ¥å£çš„å®ç°è¢«æ•´ç†åˆ°æœåŠ¡ä¸­æ¥å£æ€»çº¿å¯¹è±¡çš„æ ‘ä¸­ã€‚ç”¨æˆ·å¸Œæœ›é€šè¿‡ä»£ç†å¯¹è±¡æ¥æ¶ˆè´¹æœåŠ¡ï¼Œè¿™å°†ä¼šä½¿ç”¨ä½å±‚æ¬¡ AllJoyn ä»£ç†ä¸»çº¿å¯¹è±¡æ¥å®‰æ’é€»è¾‘ä¸»çº¿ä¸Šä¸»çº¿æ–¹æ³•ï¼Œä¸»çº¿ä¿¡å·å’Œä¸»çº¿å±æ€§ç›¸å…³ä¿¡æ¯çš„æŠ•é€’ã€‚

ä¸ºäº†å®Œæˆä¸»çº¿å¯»å€æ­¥éª¤ï¼Œä¸ä¸»çº¿çš„è¿æ¥å¿…é¡»æœ‰å”¯ä¸€æ ‡è¯†ã€‚AllJoyn ç³»ç»Ÿä¸ºæ¯ä¸€ä¸ªä¸»çº¿é™„ä»¶åˆ†é…ä¸€ä¸ªä¸´æ—¶çš„å”¯ä¸€ä¸»çº¿æ ‡ç¤ºï¼Œæ­¤å”¯ä¸€æ ‡è¯†åœ¨æœåŠ¡æ¯
ä¸€æ¬¡è¿æ¥åˆ°ä¸»çº¿æ—¶è‡ªåŠ¨ç”Ÿæˆï¼Œå› æ­¤è¯¥æ ‡ç¤ºå¹¶ä¸é€‚åˆä½œä¸ºæœåŠ¡çš„æŒä¹…æ ‡è¯†ã€‚åº”è¯¥æœ‰ä¸€ç§å¯ä»¥æŒä¹…æŸ¥é˜…åˆ°æœåŠ¡çš„æ–¹å¼ï¼Œ*well-known names* è¢«ç”¨
æ¥å……å½“æœåŠ¡çš„æŒä¹…æ ‡ç¤ºã€‚

å°±åƒå¯ä»¥ç»åŸŸåæŒ‡ä»£åœ¨ç½‘ç»œä¸Šçš„ä¸»æœºç³»ç»Ÿï¼Œå¹¶ä¸”åœ¨ä¸€å®šæ—¶é—´å†…ä¸ä¼šå˜åŒ–ä¸€æ ·ï¼ŒåŒæ ·å¯ä»¥é€šè¿‡ well-known bus name æŒ‡ä»£AllJoyn ä¸»çº¿ä¸Šçš„åŠŸ
èƒ½æ¨¡å—ã€‚å°±åƒæ¥å£åç§°æ˜¯å€’åºçš„åŸŸåä¸€æ ·ï¼Œä¸»çº¿åç§°ä¹Ÿæœ‰æ­¤ç§å‘ˆç°æ–¹æ³•ã€‚ç”±äºæ¥å£åä¸ well-known bus namesåœ¨å‡ºäºæ–¹ä¾¿çš„è€ƒè™‘ä¸‹ç»å¸¸è¢«è®¾
å®šä¸ºåŒæ ·çš„å­—ç¬¦ä¸²ï¼Œè¿™å¯¼è‡´äº†ä¸€äº›æ··æ·†çš„å‘ç”Ÿã€‚è¯·è°¨è®°ï¼Œä»–ä»¬çš„ç”¨é€”å®Œå…¨ä¸åŒï¼šæ¥å£åå®šä¹‰ä¸€ä¸ªç”±ä¸»çº¿å¯¹è±¡å®ç°çš„ï¼Œè¿è¡Œåœ¨ä¸»çº¿é™„ä»¶ä¸­çš„ï¼Œæè¿°ç”¨æˆ·ä¸æœåŠ¡çš„å¥‘çº¦ï¼›well-known name åˆ™æŒ‡ä¸ºæƒ³è¿æ¥åˆ°æŸæœåŠ¡çš„ç”¨æˆ·æä¾›ä¸€ä¸ªç¨³å®šä¸å˜çš„è¿æ¥æ–¹å¼çš„æœåŠ¡ã€‚

åœ¨åº”ç”¨ well-known name æ—¶ï¼Œåº”ç”¨ç¨‹åºï¼ˆç»è¿‡ä¸»çº¿é™„ä»¶ï¼‰å¿…é¡»äº‹å…ˆå¯¹ä¸»çº¿è·¯ç”±å‘å‡ºä½¿ç”¨è¯¥æ ‡è¯†çš„è¯·æ±‚ã€‚å¦‚æœæ­¤ well-known name æš‚æ— å…¶ä»–ç”¨
æˆ·å ç”¨ï¼Œç”³è¯·è€…å°†ä¼šè¢«ç»™äºˆè¯¥åç§°çš„ç‹¬å®¶ä½¿ç”¨æƒã€‚è¯¥æœºåˆ¶ç¡®ä¿ well-known names åœ¨ä»»ä½•æ—¶é—´éƒ½èƒ½å”¯ä¸€æŒ‡ä»£ä¸»çº¿ä¸Šçš„ç‰¹å®šåœ°å€ã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ª well-known name æ„å‘³ç€ç›¸å…³çš„ä¸»çº¿é™„ä»¶å®ç°ä¸€ç³»åˆ—ä¸»çº¿å¯¹è±¡ä»¥åŠä¸€äº›å¯ç”¨æœåŠ¡æ¦‚å¿µçš„åˆçº¦ã€‚ç”±äºä¸»çº¿åç§°ä¸ºåˆ†å¸ƒå¼ä¸»çº¿
æä¾›å”¯ä¸€åœ°å€ï¼Œæ‰€æœ‰åœ¨ä¸»çº¿ä¸Šçš„ä¸»çº¿åç§°å¿…é¡»æ˜¯ç‹¬ç‰¹å”¯ä¸€ã€‚ä¾‹å¦‚ï¼Œ`org.alljoyn.sample.chat`å¯ç”¨ä½œä¸»çº¿åç§°ï¼Œæ„å‘³ç€æœ‰ç€ç›¸åŒåç§°çš„ä¸»çº¿
é™„ä»¶å°†å¯å®ç°ä¸€ä¸ªèŠå¤©æœåŠ¡ã€‚æ ¹æ®è¯¥åç§°å·²è¢«å ç”¨çš„äº‹å®ï¼Œå¯ä»¥æ¨æ–­å‡ºåœ¨ä»¥ `/org/alljoyn/sample/chat` ä¸ºä¸»çº¿è·¯å¾„çš„ä¸»çº¿å¯¹è±¡ä¸Šå·²ç»å®ç°
äº† `/org/alljoyn/sample/chat` æ¥å£ã€‚

åœ¨å®ç°â€œèŠå¤©â€åŠŸèƒ½æ—¶ï¼Œä¸€æ–¹å¾€å¾€æœŸæœ›ç€åœ¨ AllJoyn æ€»çº¿ä¸Šèƒ½å‘ç°å¦ä¸€ä¸ªåŒæ ·æ”¯æŒèŠå¤©åŠŸèƒ½çš„ç›¸ä¼¼ç»„ä»¶ã€‚ç”±äºä¸»çº¿åç§°å¿…é¡»ä½œä¸ºç»„ä»¶é™„ä»¶çš„å”¯
ä¸€è¯†åˆ«ï¼Œåœ¨è¿™é‡Œå°±éœ€è¦ä»¥åŠ å…¥åç¼€çš„æ–¹å¼ç¡®ä¿å”¯ä¸€æ€§ã€‚åç¼€å¯ä»¥æ˜¯ç”¨æˆ·åï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå”¯ä¸€çš„æ•°å­—ã€‚åœ¨èŠå¤©æœåŠ¡çš„ä¾‹å­ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªæ€»çº¿é™„ä»¶ï¼š

```sh
org.alljoyn.sample.chat.bob

org.alljoyn.sample.chat.carol
```
æ­¤å¤„çš„ well-known name ä¸­ï¼Œå‰ç¼€`org.alljoyn.sample.chat.`çš„ä½œç”¨æ˜¯å……å½“æœåŠ¡åï¼Œå¯ä»¥ç”±å…¶æ¨æ–­å‡ºèŠå¤©æœåŠ¡æ¥å£ä»¥åŠå¯¹è±¡å®ç°çš„å­˜åœ¨ã€‚åç¼€ `bob` and `carol` ä½¿ä¸¤ä¸ªå®ä¾‹çš„ well-known name å”¯ä¸€ã€‚

éšä¹‹è€Œæ¥çš„é—®é¢˜æ˜¯ï¼Œå¤„äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸Šçš„æœåŠ¡å¦‚ä½•è¢«å®šä½ã€‚ç­”æ¡ˆæ˜¯é€šè¿‡å®¢æˆ·ç«¯çš„æœåŠ¡å¹¿æ’­ä»¥åŠå‘ç°æœºåˆ¶ã€‚

This leads to the question of how services are located in the
distributed system. The answer is via service advertisement and discovery by clients.


### å¹¿æ’­åŠå‘ç°

å…³äºæœåŠ¡å¹¿æ’­ä¸å‘ç°çš„é—®é¢˜ä¸»è¦æœ‰ä¸¤æ–¹é¢ã€‚ä¹‹å‰æåŠåˆ°ï¼Œå³ä¾¿æ˜¯å¯¹äºä½äº AllJoyn æ€»çº¿æœ¬åœ°ç‰‡æ®µçš„æœåŠ¡ï¼Œç”¨æˆ·ä»ç„¶éœ€è¦éå†æ‰€æœ‰çš„ well-known namesæ¥æœå¯»è‡ªå·±æ‰€éœ€è¦çš„æœåŠ¡ã€‚å†è€…ï¼Œå½“ç”¨æˆ·è¯•å›¾å‘ç°å¹¶ä¸ä½äºç°æœ‰çš„ä¸»çº¿ç‰‡æ®µä¸Šçš„æœåŠ¡æ—¶ï¼Œä¼šå‘ç”Ÿæ›´æœ‰è¶£çš„é—®é¢˜ã€‚

è¯·è€ƒè™‘è¿™ä¸ªé—®é¢˜ï¼šå½“ä¸€æ–¹æºå¸¦ç€è¿è¡Œ AllJoyn æ¡†æ¶çš„è®¾å¤‡æ¥è¿‘å¦ä¸€æ–¹çš„é‚»è¿‘åœºæ—¶ã€‚ç”±äºä¸¤è®¾å¤‡å·²è¢«ç‰©ç†åˆ†ç¦»çš„ï¼Œæ¡†æ¶çš„è®¾å¤‡æ¥è¿‘å¦ä¸€æ–¹çš„é‚» è¿‘åœºæ—¶ã€‚ç”±äºä¸¤è®¾å¤‡å·²è¢«ç‰©ç†åˆ†ç¦»çš„äº‹å®ï¼Œç”±éƒ½ä¸å¯èƒ½çŸ¥é“å¯¹æ–¹çš„ä»»ä½•ä¿¡æ¯ã€‚é‚£ä¹ˆè·¯ç”±ç‚¹æ˜¯å¦‚ä½•ç¡®å®šå¯¹æ–¹è®¾å¤‡çš„å­˜åœ¨ï¼Œå¦‚ä½•åˆ¤æ–­æ˜¯å¦æœ‰å¿…è¦è¿›è¡Œè¿æ¥å¹¶å»ºç«‹é€»è¾‘åˆ†å¸ƒå¼ AllJoyn æ€»çº¿å‘¢ï¼Ÿ

ç­”æ¡ˆæ˜¯é€šè¿‡ AllJoyn æœåŠ¡å¹¿æ’­å’Œå‘ç°è®¾å¤‡ã€‚å½“æœåŠ¡åœ¨æœ¬åœ°è®¾å¤‡ä¸Šå¼€å§‹æ—¶ï¼Œä»–é¦–å…ˆå°†è¢«èµ‹äºˆçš„ well-known name åè½¬ï¼Œéšåå‘ä»–é‚»è¿‘åŸŸçš„è®¾å¤‡
å¹¿æ’­å…¶å­˜åœ¨ã€‚AllJoyn æ¡†æ¶æä¾›ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œä½¿æœåŠ¡å¯ä»¥é€šè¿‡åº•å±‚æŠ€æœ¯ï¼Œè¯¸å¦‚Wi-Fi, Wi-Fi Direct æˆ–å…¶ä»–æœªæ¥çš„æ— çº¿ä¼ è¾“æ–¹å¼æ¥å®ç°é€æ˜å¹¿
æ’­ã€‚

ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªè”ç³»äººäº¤æ¢åº”ç”¨ç¨‹åºä¸­ï¼Œå…¶ä¸­çš„ä¸€ä¸ªå®ä¾‹å¯ä»¥å°† well-known nameï¼š`org.alljoyn.sample.contacts.bob` åè½¬å¹¶å¹¿æ’­ã€‚å¦‚æ­¤
åšå°†è§¦å‘ä»¥ä¸‹ä¸€ç§æˆ–å¤šç§äº‹ä»¶ï¼šé€šè¿‡ Wi-Fi æ¥å…¥ç‚¹è¿›è¡Œ UDP ç»„æ’­ï¼Œé€šè¿‡ Wi-Fi Direct è¿›è¡Œé¢„å…³è”æœåŠ¡çš„å¹¿æ’­ï¼Œæˆ–è€…é€šè¿‡è“ç‰™æœåŠ¡å‘ç°åè®®
å‘é€æ¶ˆæ¯ã€‚å¹¿æ’­çš„é€šä¿¡æœºåˆ¶å¹¶ä¸éœ€è¦è€ƒè™‘å¹¿æ’­è€…ã€‚ç”±äºè”ç³»äººäº¤æ¢åœ¨æ¦‚å¿µä¸Šæ˜¯ä¸€ä¸ªç‚¹å¯¹ç‚¹çš„åº”ç”¨ç¨‹åºï¼Œä¸€æ–¹é€šå¸¸ä¼šå¸Œæœ›å¦ä¸€æ–¹ä¹Ÿå¹¿æ’­ç±»ä¼¼çš„äº¤æ¢æœåŠ¡ï¼Œä¾‹å¦‚ `org.alljoyn.sample.contacts.carol`.

åº”ç”¨ç¨‹åºå®¢æˆ·ç«¯ä¹Ÿå¯é€šè¿‡åˆå§‹åŒ–ä¸€ä¸ªå‘ç°æ“ä½œæ¥å£°æ˜ä»–ä»¬å¯¹æ¥æ”¶å¹¿æ’­çš„å…´è¶£æ‰€åœ¨ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ä»¥è¦æ±‚æ·»åŠ å‰ç¼€ä¸º`org.alljoyn.sample.contacts`çš„è”ç³»äººæœåŠ¡å®ä¾‹ã€‚è‹¥å¦‚æ­¤åšï¼Œä¸¤æ–¹è®¾å¤‡éƒ½ä¼šå‘å‡ºè¿™ç§è¯·æ±‚ã€‚

åº•å±‚ AllJoyn ç³»ç»Ÿåœ¨ç§»åŠ¨ç”µè¯è¿›å…¥å…¶ä»–è®¾å¤‡çš„é‚»è¿‘åŸŸæ—¶ç«‹å³å¼€å§‹é€šè¿‡å¯ç”¨ä¼ è¾“æ¸ é“ä¼ è¾“å¹¶æ¥å—å¹¿æ’­ã€‚æ¯å°è®¾å¤‡åœ¨ç›¸åº”æœåŠ¡å¯ä½¿ç”¨æ—¶ä¹Ÿä¼šæ”¶åˆ°æé†’ã€‚

ç”±äºæœåŠ¡æ¨å¹¿å¯ä»¥é€šè¿‡å¤šç§ä¼ è¾“æ–¹å¼æ¥å—ï¼Œåœ¨æŸäº›æƒ…å†µé‡Œè¿˜éœ€è¦é™„åŠ çš„åº•å±‚å·¥ä½œä»¥ä¾¿ç”Ÿæˆåº•å±‚é€šä¿¡æœºåˆ¶ï¼Œå¯¹å·²å‘ç°æœåŠ¡çš„åº”ç”¨è¿˜æœ‰å¦å¤–ä¸€éƒ¨åˆ†æ¦‚å¿µã€‚è¿™å°±æ˜¯é€šä¿¡ä¼šè¯ã€‚

### ä¼šè¯

å…³äºæ€»çº¿åç§°ï¼Œå¯¹è±¡è·¯å¾„ä»¥åŠæ¥å£åæˆçš„æ¦‚å¿µå·²ç»è¢«è®¨è®ºè¿‡ã€‚å›æƒ³ä¸€ä¸‹ï¼Œå®ä½“è¿æ¥åˆ° AllJoyn æ€»çº¿åä¼šè¢«åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ã€‚è¿æ¥ï¼ˆä¸»çº¿
é™„ä»¶ï¼‰ä¹Ÿå¯ç”³è¯·ä¸€ä¸ª well-known name. æ­¤ well-known name å¯è¢«ç”¨æˆ·ç”¨äºå®šä½æˆ–å‘ç°æ€»çº¿ä¸Šçš„æœåŠ¡ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæœåŠ¡å¯ä»¥è¿æ¥åˆ° AllJoyn æ€»çº¿ä¸Šå¹¶è¢«åˆ†é…å”¯ä¸€è¯†åˆ«ç¬¦ `:1.1`. å¦‚æœæœåŠ¡å¸Œæœ›ä»–å¯ä»¥è¢«å…¶ä»–åœ¨æ€»çº¿ä¸Šçš„å®ä½“æ‰¾åˆ°ï¼Œæ­¤æœåŠ¡å¿…é¡»ä»æ€»çº¿ç”³è¯·ä¸€ä¸ª well-known nameï¼Œä¾‹å¦‚
`com.companyA.ProductA`ï¼ˆåé¢å¸¸ä¼šåŠ ä¸Šä¸€ä¸ªå”¯ä¸€çš„å®ä½“é™å®šç¬¦ï¼‰ã€‚

æ­¤è¯†åˆ«ç¬¦è‡³å°‘æŒ‡ç¤ºä¸€ä¸ªå®ç°äº†ä¸€äº› well-known interface çš„æ€»çº¿å¯¹è±¡ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨è¿æ¥å®ä¾‹å†…ï¼Œæ€»çº¿å¯¹è±¡å¯ä»¥è¢«ä¸€ä¸ªä¸ well-known name åŒ…å«ç›¸åŒç»„ä»¶ï¼ˆæ­¤å¤„å¹¶éæ˜¯å¼ºåˆ¶è¦æ±‚ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼‰çš„è·¯å¾„è¾¨è®¤å‡ºæ¥ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¯¹åº”æ€»çº¿è¯†åˆ«ç¬¦`com.companyA.ProductA`
çš„è·¯å¾„å¯ä»¥æ˜¯`/com/companyA/ProductA`.


ä¸ºäº†æ˜ç™½ç”¨æˆ·æ€»çº¿é™„ä»¶åˆ°ç›¸ä¼¼çš„æœåŠ¡é™„ä»¶ä¹‹é—´çš„é€šä¿¡ä¼šè¯çš„å½¢æˆæœºåˆ¶ï¼Œä¹Ÿä¸ºäº†æä¾›ä¸€ä¸ªç»ˆç«¯åˆ°ç»ˆç«¯çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥å°† AllJoyn æœºåˆ¶ä¸ä¸€ä¸ª
ç±»ä¼¼çš„æœºåˆ¶åšä¸€ä¸‹æ¯”å¯¹ã€‚

#### é‚®æ”¿åœ°å€çš„ç±»æ¯”

åœ¨ AllJoyn æ¡†æ¶ä¸­ï¼ŒæœåŠ¡ä¼šè¯·æ±‚ä¸€ä¸ªå¯¹äººç±»å¯è¯»çš„åå­—ï¼Œä»¥ä¾¿äºå°†è‡ªå·±ä»¥ä¼—æ‰€å‘¨çŸ¥çš„ï¼Œç®€å•æ˜“æ‡‚çš„æ ‡ç­¾å¹¿æ’­å‡ºå»ã€‚ä¸ºäº†åº•å±‚ç½‘ç»œä¸­æ¶ˆæ¯äº¤æ¢çš„æ­£å¸¸è¿è½¬ï¼ŒWell-known names ä¸€å®šéœ€è¦è¢«ç¿»è¯‘æˆå”¯ä¸€çš„æ ‡è¯†ï¼Œä¾‹å¦‚ï¼š

```
Well-known-name:org.alljoyn.sample.chat

Unique name::1.1
```

è¿™é‡Œæˆ‘ä»¬å¾—çŸ¥ï¼Œè¢«ä»¥`org.alljoyn.sample.chat`å¹¿æ’­çš„ well-known name å¯¹åº”ç€å·²è¢«åˆ†é…å”¯ä¸€æ ‡è¯† `:1.1` çš„æ€»çº¿é™„ä»¶ã€‚è¿™ç§æ–¹å¼ç±»ä¼¼äºæœ‰
ç€åå­—å’Œé‚®å¯„åœ°å€çš„ç”Ÿæ„ã€‚ç»§ç»­ç±»æ¯”ï¼šæ­¤ç”Ÿæ„å¾ˆå¯èƒ½ä¼šå­˜åœ¨äºåŒæ—¶æœ‰ç€å…¶ä»–ç”Ÿæ„çš„å»ºç­‘ä¸­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç”Ÿæ„çš„åœ°å€å¯èƒ½ä¼šè¢«ä¸€ä¸ªæ›´å…·ä½“çš„æˆ¿é—´å·æ‰€æè¿°ã€‚ç”±äº AllJoyn æ€»çº¿é™„ä»¶å¯ä»¥æä¾›ä¸æ­¢ä¸€ä¸ªæœåŠ¡ï¼Œè¿™é‡Œä¸€å®šä¹Ÿæœ‰å¯ä»¥è¯†åˆ«å¤šä¸ªåœ¨ç»™å®šé™„ä»¶ä¸Šçš„ç›®çš„åœ°å€çš„æ–¹æ³•ã€‚â€œ contact port numbe â€å°±å¯¹åº”ç€é‚®å¯„åœ°å€ç±»æ¯”ä¸­çš„æˆ¿é—´å·ã€‚

å°±åƒäººä»¬åœ¨å‘é€ä¿¡ä»¶æ—¶å¯ä»¥é€‰æ‹©ä½¿ç”¨å›½å®¶é‚®ä»¶ç³»ç»Ÿï¼ˆä¾‹å¦‚ç¾å›½é‚®æ”¿å±€ï¼Œæ³•å›½é‚®æ”¿å±€ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç§äººå…¬å¸ï¼ˆè”é‚¦å¿«é€’ï¼Œè”åˆåŒ…è£¹æœåŠ¡å…¬å¸ï¼‰ï¼ŒåŒæ—¶è¿˜å¯ä»¥é€‰æ‹©ç´§æ€¥ç¨‹åº¦ï¼ˆæ¬¡æ—¥è¾¾ï¼Œä¸¤å·¥ä½œæ—¥ï¼Œï¼‰ï¼Œåœ¨ä½¿ç”¨ AllJoyn æ¡†æ¶è”ç³»æœåŠ¡æ—¶ï¼Œä½¿ç”¨è€…å¿…é¡»æ˜ç¡®æå‡ºæƒ³è·å–çš„ç½‘ç»œè¿æ¥çš„ç‰¹æ€§ï¼ˆ
ä¾‹å¦‚ï¼Œå¯é é€è¾¾çš„æ¶ˆæ¯ï¼Œå¯é é€è¾¾å¹¶æœªç»æ’åˆ—çš„æ¶ˆæ¯ï¼Œä¸å¯é é€è¾¾å¹¶æœªç»æ’åˆ—çš„æ¶ˆæ¯ï¼‰ä»¥ä¾¿æä¾›è¯¦å°½çš„é…é€è§„èŒƒã€‚

è¯·æ³¨æ„ä»¥ä¸Šä¾‹å­ä¸­åœ°å€ä¿¡æ¯çš„åˆ†éš”ä»¥åŠä¿¡æ¯çš„æŠ•é€’ã€‚åŒç†äºç”¨æˆ·å¯è€ƒè™‘åœ¨è¯¸å¤šå¿«é€’æ–¹å¼ä¸­é€‰æ‹©ä¸€ç§å®Œæˆä¿¡ä»¶ä¼ é€ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥åœ¨ AllJoyn ç³»ç»Ÿä¸­é€‰æ‹©ä¸€ç§æ–¹å¼å®Œæˆæ•°æ®ä¼ é€ã€‚

#### AllJoyn ä¼šè¯

ä¸ä¸€å°è§„èŒƒåˆ—å‡ºâ€œå¯„å‡ºåœ°â€å’Œâ€œç›®çš„åœ°â€åœ°å€çš„ä¿¡åŒç†ï¼ŒAllJoyn ä¼šè¯ä¹Ÿéœ€è¦ä¸â€œå¯„å‡ºåœ°â€å’Œâ€œç›®çš„åœ°â€ç›¸ç­‰ä»·çš„ä¿¡æ¯ã€‚åœ¨ AllJoyn ç³»ç»Ÿä¸­ï¼Œå¯„å‡ºåœ°åœ°å€å¯¹åº”ç€ç”¨æˆ·ç»„ä»¶çš„ä½ç½®ï¼Œç›®çš„åœ°åœ°å€åˆ™å¯¹åº”æœåŠ¡çš„ä½ç½®ã€‚

ä¸¥æ ¼åœ°è¯´ï¼Œè¿™äº›åœ°å€åœ¨ç”µè„‘ç½‘ç»œä¸­åº”è¯¥è¢«æˆä¸º half-associations. åœ¨ AllJoyn æ¡†æ¶ä¸­ï¼Œæ”¶ä»¶äººï¼ˆæœåŠ¡ç«¯ï¼‰åœ°å€é€šå¸¸æ˜¯å¦‚ä¸‹å½¢å¼çš„ï¼š
```c
{session options, bus name, session port}
```

ç¬¬ä¸€ä¸ªåŒºåŸŸæ˜¯ä¼šè¯é€‰é¡¹ï¼Œå†³å®šç€æ•°æ®çš„ä¼ é€æ–¹å¼ã€‚åœ¨ IP ç½‘ç»œä¸­ï¼Œä¼šè¯é€‰é¡¹å¯ä»¥ä½¿ TCP æˆ–è€… UDP. åœ¨ AllJoyn æ¡†æ¶ä¸­è¿™äº›ç»†èŠ‚ä¼šè¢«è™šæ‹ŸåŒ–ï¼Œ
å¯¹åº”çš„é€‰é¡¹åˆ™ä¼šå˜ä¸ºâ€œåŸºäºæ¶ˆæ¯çš„â€ï¼Œâ€œæœªæ’åˆ—çš„æ•°æ®â€ï¼Œæˆ–è€…â€œä¸ç¨³å®šçš„æœªæ’åˆ—æ•°æ®â€ã€‚æœåŠ¡çš„ç›®çš„åœ°ç”±ç›¸å…³ä¸»çº¿é™„ä»¶æ‰€è¯·æ±‚çš„ well-known name ç»™å‡ºã€‚

ä¸ä¹‹å‰é‚®ç¼–åœ°å€ä¾‹å­ä¸­çš„í ¼æˆ¿é—´å·ç±»ä¼¼ï¼ŒAllJoyn æ¨¡å‹ä¸­ä¹Ÿæœ‰åœ¨ä¸»çº¿é™„ä»¶â€œé‡Œé¢â€çš„ä¼ é€ç‚¹æ¦‚å¿µã€‚æ­¤æ¦‚å¿µåœ¨ AllJoyn æ¡†æ¶ä¸­è¢«ç§°ä¸ºä¼šè¯ç«¯å£ã€‚æˆ¿
é—´å·åªæœ‰åœ¨ç»™å®šå»ºç­‘å†…æ‰æœ‰æ„ä¹‰ï¼Œä¼šè¯ç«¯å£å·åŒç†ï¼Œå¿…é¡»è¦åœ¨ç»™å®šçš„æ€»çº¿é™„ä»¶èŒƒå›´å†…å®šä¹‰ã€‚è”ç³»ç«¯å£çš„å­˜åœ¨ä¸æ•°å€¼è¢«ä¸»çº¿æ ‡è¯†æ‰€é—´æ¥æŒ‡å‡ºï¼Œè¿™ä¸åº•å±‚çš„å¯¹è±¡å’Œæ¥å£ç»„è¢«é—´æ¥æŒ‡å‡ºçš„æ–¹å¼ç›¸åŒã€‚

å¯„ä»¶äººåœ°å€å¯¹åº”å®¢æˆ·ç«¯ä¿¡æ¯ï¼Œä¹Ÿæ˜¯ç”±ç›¸ä¼¼çš„åŸç†ç”Ÿæˆã€‚ä¸ºäº†å’ŒæœåŠ¡ç«¯æ­£å¸¸é€šä¿¡ï¼Œå®¢æˆ·ç«¯å¿…é¡»æœ‰è‡ªå·±çš„ half-association.

```c
{session options, unique name, session ID}
```
å®¢æˆ·ç«¯ä¸éœ€è¦ç”³è¯· well-known ä¸»çº¿åç§°ï¼Œæ‰€ä»¥ä»–ä»¬å¯ä»¥æä¾›è‡ªå·±çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆä¾‹å¦‚`:1.1`ï¼‰ã€‚ç”±äºå®¢æˆ·ç«¯ä¸æ˜¯ä¼šè¯çš„ç»ˆç‚¹ï¼Œä»–ä»¬ä¹Ÿä¸éœ€è¦æä¾›ä¼šè¯ç«¯å£ï¼Œä½†æ˜¯åœ¨è¿æ¥å»ºç«‹å®Œæˆåä¼šè¢«åˆ†é…ä¼šè¯ ID. åœ¨ä¼šè¯å»ºç«‹æ­¥éª¤ä¸­æ­¤ä¼šè¯ ID ä¹Ÿä¼šè¢«è¿”å›åˆ°æœåŠ¡å™¨ç«¯ã€‚å¯¹äºç†Ÿæ‚‰ TCP ç½‘ç»œç»“æ„çš„äºº
ï¼Œæ­¤æ“ä½œä¸ TCP ä¸­å»ºç«‹è¿æ¥çš„æ“ä½œæ˜¯å¯¹ç­‰çš„ï¼ŒæœåŠ¡å™¨ç«¯é€šè¿‡ well-known ç«¯å£è¢«è®¿é—®ã€‚åœ¨ä¼šè¯å»ºç«‹åï¼Œå®¢æˆ·ç«¯ç”¨ä¸€ä¸ªä¸´æ—¶ç«¯å£æè¿°ç›¸ä¼¼çš„ half-association.

åœ¨å»ºç«‹ä¼šè¯æ—¶ï¼Œä¸¤æ–¹çš„ half-associations ä¼šè¢«èšåˆï¼š

```c
{session options, bus name, session port}	Service

{session options, unique name, session ID}	Client
```
æ³¨æ„ï¼Œä¼šè¯é€‰é¡¹ä¸­æœ‰ä¸¤ä¸ªé€‰æ‹©ã€‚åœ¨é€šä¿¡å»ºç«‹æ—¶ï¼Œä¼šè¯æœºåˆ¶è¢«çœ‹ä½œæ˜¯æœåŠ¡ç«¯æ‰€èƒ½æä¾›çš„ä¼šè¯é€‰é¡¹ä»¥åŠç”±å®¢æˆ·ç«¯æ‰€è¯·æ±‚çš„ä¼šè¯é€‰é¡¹ã€‚åœ¨ä¼šè¯å»ºç«‹è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€éƒ¨åˆ†æ˜¯ç”¨æ¥åå•†ä½•ç§ä¼šè¯é€‰é¡¹å°†ä¼šæœ€ç»ˆè¢«é‡‡å–ã€‚ä¸€æ—¦ä¼šè¯å»ºç«‹å®Œæˆï¼Œä¸¤æ–¹çš„ half-associations ä¼šç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ AllJoyn é€šä¿¡è·¯å¾„ï¼š

```c
{session options, bus name, unique name, session ID}
```

åœ¨ä¼šè¯å»ºç«‹ç¨‹åºä¸­ï¼Œä¸¤ä¸ªæ­£åœ¨é€šä¿¡çš„è·¯ç”±èŠ‚ç‚¹ä¹‹é—´ä¼šå½¢æˆä¸€ä¸ªé€»è¾‘ç½‘ç»œè¿æ¥ã€‚è¿™å°†ä¼šå½¢æˆä¸€ä¸ª wireless radio topology management operation. å¦‚æœä»¥ä¸Šè¿æ¥å·²ç»å­˜åœ¨ï¼Œä»–å°†ä¼šè¢«å†æ¬¡ä½¿ç”¨ã€‚æ–°åˆ›å»ºçš„åº•å±‚è·¯ç”±å¯¹è·¯ç”±è¿æ¥è¢«ç”¨æ¥å®Œæˆåˆå§‹å®‰å…¨æ£€æŸ¥ï¼Œæ£€æŸ¥å®Œæˆåä¸¤è·¯ç”±å°±å·²æˆåŠŸå°†ä¸¤ä¸ªåŸæœ¬åˆ†ç¦»çš„ AllJoyn è½¯ä»¶ä¸»çº¿ç‰‡æ®µèšåˆæˆä¸ºä¸€ä¸ªæ›´å¤§ä¸€äº›çš„è™šæ‹Ÿä¸»çº¿ã€‚

ç”±äºåœ¨æŸäº›æŠ€æœ¯ä¸­ï¼Œæœ‰å…³ç»ˆç«¯å¯¹ç»ˆç«¯çš„åº•å±‚è¿æ¥æµé‡æ§åˆ¶ä¸€å®šè¦ç”¨æ‹“æ‰‘å­¦è€ƒè™‘ä½¿å…¶å‡è¡¡åŒ–ï¼Œä¸¤ä¸ªç»ˆç«¯å®é™…çš„è¿æ¥ï¼ˆâ€œå¯„ä»¶äººâ€å®¢æˆ·ç«¯å’Œâ€œæ”¶ä»¶äººâ€æœåŠ¡ç«¯ï¼‰å¯èƒ½ä¹Ÿå¯èƒ½ä¸ä¼šå¯¼è‡´å¦ä¸€ä¸ªç‹¬ç«‹çš„é€šä¿¡ä¿¡é“è¢«åˆ›å»ºã€‚

åœ¨æŸäº›æƒ…å†µä¸­ï¼Œç»è¿‡ ad hoc æ‹“æ‰‘ç»“æ„ä¼ é€ä¿¡æ¯ä¼šè¾ƒä¸ºæ–¹ä¾¿ï¼Œè€Œåœ¨å¦å¤–ä¸€äº›æƒ…å†µä¸‹é€šè¿‡ä¸€ä¸ªæ–°è¿æ¥ ï¼ˆTCP/IPï¼‰è¿›è¡Œç›´æ¥ä¼ é€æ¯”è¾ƒæ–¹ä¾¿ã€‚è¿™ç§
æƒ…å†µä¸‹éœ€è¦å¯¹åº•å±‚æŠ€æœ¯æœ‰æ·±å…¥çš„äº†è§£ï¼ŒAllJoyn æ¡†æ¶å¾ˆä¹æ„ä¸ºä½ å®Œæˆè¿™ä¸€ç‚¹ã€‚ç”¨æˆ·æ‰€è¦åšçš„ä»…ä»…æ˜¯ç¡®ä¿æ¶ˆæ¯é€šè¿‡æŸç§ä¼ é€æœºåˆ¶æ ¹æ®åº”ç”¨ç¨‹åºçš„ æŠ½è±¡éœ€æ±‚è¢«æ­£ç¡®çš„è½¬å‘ã€‚

#### è‡ªæˆ‘åŠ å…¥åŠŸèƒ½

åœ¨ AllJoyn R14.06 çš„ç‰ˆæœ¬ä¹‹å‰ï¼Œåº”ç”¨ç¨‹åºæ— æ³•å‚ä¸ç”±è‡ªå·±ä½œä¸»æœºçš„ä¼šè¯ã€‚

In AllJoyn releases up to R14.06, it was impossible for applications
to join a session they themselves hosted. For applications that consume
information or services they themselves also provide, this created an
asymmetry: they had to treat the bus objects they hosted themselves
differently from those hosted by other peers. The self-join feature
removes this asymmetry by allowing applications to join the sessions
they themselves host. Consequently, a locally hosted bus object can be
treated in exactly the same way as a remotely hosted bus object.

#### Determining the presence of a peer - pinging and auto-pinging

Sometimes, a application needs to know which peers are present on the communication
channel ("the wire") and which aren't.  For this reason, a PING API was introduced in
version 14.06. This PING API allows to determine whether a peer is up or not.
However, for this API, the responsibility for using the PING API was with the
Application, which periodically needed to ping the peers. From Release 14.12 onwards,
an automatic PING or Auto-Pinger is introduced. This Auto-Pinger performs the
periodic peer detection, relieving  the application of having to do it.

### Bringing it all together

The AllJoyn framework aims to provide a software bus that
manages the implementation of advertising and discovering services,
providing a secure environment, and enabling location-transparent
remote method invocation. A traditional client/service arrangement
is enabled, and peer-to-peer communications follow by combining
the aspects of client and services.

The most basic abstraction in the AllJoyn framework is the
software bus that ties everything together. The virtual distributed
bus is implemented by AllJoyn routing nodes which are background
programs running on each device. Clients and services (and peers)
connect to the bus via bus attachments. The bus attachments
live in the local processes of the clients and services and
provide the interprocess communication that is required to
talk to the local AllJoyn router.

Each bus attachment is assigned a unique name by the system
when it connects. A bus attachment can request to be granted
a unique human-readable bus name that it can use to advertise
itself to the rest of the AllJoyn world. This well-known bus
name lives in a namespace that looks like a reversed domain
name and encourages self-management of the namespace.
The existence of a bus attachment of a specific name implies
the further existence of at least one bus object that implements
at least one interface specified by a name. Interface names are
assigned out of a namespace that is similar, but has a different
meaning than bus names. Each bus object lives in a tree structure
rooted at the bus attachment and described by an object path
that looks like a Unix filesystem path.

The following figure shows a hypothetical arrangement of how
all of these pieces are related.

![hypothetical-alljoyn-bus-instance][hypothetical-alljoyn-bus-instance]

**Figure:** Overview of a hypothetical AllJoyn bus instance

At the center is the dark line representing the AllJoyn bus.
The bus has "exits" which are the BusAttachments assigned
the unique names `:1.1` and `:1.4`. In the figure, the BusAttachment
with the unique name of `:1.1` has requested to be known as
`org.alljoyn.samples.chat.a` and has been assigned the corresponding
well-known bus name. The "a" has been added to ensure that
the bus name is unique.

There are a number of things implied by taking on that bus name.
First, there is a tree structure of bus objects that resides
at different paths. In this hypothetical example, there are
two bus objects. One is at the path `/org/alljoyn/samples/chat/chat`
and which presumably implements an interface suitable for chatting.
The other bus object lives at the path `/org/alljoyn/samples/chat/contacts`
and implements an interface named `org.alljoyn.samples.chat.contacts`.
Since the given bus object implements the interface, it must
provide implementations of the corresponding bus methods,
bus signals, and bus properties.

The number 42 represents a contact session port that clients
must use to initiate a communication session with the service.
Note that the session port is unique only within the context of
a particular bus attachment, so the other bus attachment in the
figure may also use 42 as its contact port as shown.

After requesting and being granted the well-known bus name,
a service will typically advertise the name to allow clients
to discover its service. The following figure shows a service making an
advertise request to its local router. The router, based on
input from the service, decides what network medium-specific
mechanism it should use to advertise the service and begins doing so.

![service-performs-advertise][service-performs-advertise]

**Figure:** Service performs an Advertise

When a prospective client wants to locate a service for consumption,
it issues a find name request. Its local router device, again
based on input from the client, determines the best way to
look for advertisements and probes for advertisements.

![client-requests-find-name][client-requests-find-name]

**Figure:** Client requests to Find Name

Once the devices move into proximity, they begin hearing
each other's advertisements and discovery requests over whichever
media are enabled. The following figure shows how the router hosting the
service hears the discovery requests and responds.

![router-reports-found-name][router-reports-found-name]

**Figure:** Router reports Found Name

Finally, the following figure shows the client receiving an indication
that there is a new router in the area that is hosting the desired service.

![client-discovers-service][client-discovers-service]

**Figure:** Client discovers service

The client and service sides of the developing scenario both
use methods and callbacks on their bus attachment object to
make the requests to orchestrate the advertisement and discovery
process. The service side implements bus objects to provide
its service, and the client will expect to use a proxy object
to provide an easy-to-use interface for communicating with
the service. This proxy object will use an AllJoyn ProxyBusObject
to orchestrate communication with the service and provide
for the marshaling and unmarshaling of method parameters
and return values.

Before remote methods can be called, a communication session
must be formed to effectively join the separate bus segments.
Advertisement and discovery are different from session establishment.
One can receive an advertisement and take no action. It is
only when an advertisement is received, and a client decides
to take action to join a communication session, that the
buses are logically joined into one. To accomplish this,
a service must create a communication session endpoint and
advertise its existence; and a client must receive that
advertisement and request to join the implied session.
The service must define a half-association before it advertises
its service. Abstractly this will look something like the following:

```c
{reliable IP messages, org.alljoyn.samples.chat.a, 42}
```

This indicates that it will talk to clients over a reliable
message-based transport, has taken the well-known bus name
indicated, and expects to be contacted at session port 42.
This is the situation seen in the hypothetical bus instance figure.

Assume that there is a bus attachment with the unique
name `:2.1` wanting to connect from a physically remote
routing node. It will provide its half association to the
system and a new session ID will be assigned and communicated
to both sides of the conversation:

```c
{reliable IP messages, org.alljoyn.samples.chat.a, :2.1, 1025}
```

The new communication session will use a reliable messaging
protocol implemented using the IP protocol stack which will
exist between the bus attachment named `org.alljoyn.samples.chat.a`
(the service) and the bus attachment named :2.1 (the client).
The session ID used to describe the session is assigned by
the system and is 1025 in this case.

As a result of establishing the end-to-end communication
session, the AllJoyn system takes whatever actions are
appropriate to create the virtual software bus shown in
the distributed bus figure. Note that this is a virtual picture, and what
may have actually happened is that a Wi-Fi Direct peer-to-peer
connection was formed to host a TCP connection, or a Wireless
access point was used to host a UDP connection, depending
on the provided session options. Neither the client nor
the service is aware that this possibly very difficult
job was completed for them.

At this point, authentication can be attempted if desired
and then the client and service begin communicating using the RMI model.

Of course, the scenario is not limited to one client on one
device and one service on another device. There may be any number
of clients and any number of services (up to a limit of device or
network capacity) combining to accomplish some form of
cooperative work. Bus attachments may take on both client
and service personalities and implement peer-to-peer services.
AllJoyn routers take on the hard work of forming a manageable
logical unit out of many disparate components and routing messages.
Additionally, the nature of the interface description and
language bindings allow interoperability between components
written in different programming languages.

## High-Level System Architecture

From the perspective of a user of the AllJoyn system, the most
important piece of the architecture to understand is that of
a client, service, or peer. From a system perspective, there
is really no difference between the three basic use cases;
there are simply different usage patterns of the same system-provided functionality.

### Clients, services, and peers

The following figure shows the architecture of the system from a user
(not AllJoyn router) perspective.

![client-service-peer-arch][client-service-peer-arch]

**Figure:** Basic client, service, or peer architecture

At the highest level are the language bindings. The AllJoyn system
is written in C++, so for users of this language, no bindings
are required. However, for users of other languages, such
as Java or JavaScript, a relatively thin translation layer
called a language binding is provided. In some cases, the binding
may be extended to offer system-specific support. For example,
a generic Java binding will allow the AllJoyn system to be
used from a generic Java system that may be running under
Windows or Linux; however, an Android system binding may
also be provided which more closely integrates the AllJoyn system
into Android-specific constructs such as a service component in
the Android application framework.

The system and language bindings are built on a layer of helper
objects which are designed to make common operations in the
AllJoyn system easier. It is possible to use much of the AllJoyn
system without using these helpers; however, their use is
encouraged since it provides another level of abstract interface.
The bus attachment, mentioned in the previous chapters, is a
critical helper without which the system is unusable. In addition
to the several critical functions provided, a bus attachment
also provides convenience functions to make management of
and interaction with the underlying software bus much easier.

Under the helper layer is the messaging and routing layer.
This is the home of the functionality that marshals and
unmarshals parameters and return values into messages that
are sent across the bus. The routing layer arranges for the
delivery of inbound messages to the appropriate bus objects
and proxies, and arranges for messages destined for other
bus attachments to be sent to an AllJoyn router for delivery.

The messaging and routing layer talks to an endpoint layer.
In the lower levels of the AllJoyn system, data is moved
from one endpoint to another. This is an abstract communication
endpoint from the perspective of the networking code.
Networking abstractions are fully complete at the top of the
endpoint's layer, where there is essentially no difference
between a connection over a non Wi-Fi radio (Bluetooth) and
a connection over a wired Ethernet.

Endpoints are specializations of transport mechanism-specific
entities called transports, which provide basic networking
functionality. In the case of a client, service, or peer,
the only network transport used is the local transport.
This is a local interprocess communication link to the
local AllJoyn bus router. In Linux-based systems, this is
a Unix-domain socket connection, and in Windows-based systems
this is a TCP connection to the local router.

The AllJoyn framework provides an OS abstraction layer to
provide a platform on which the rest of the system is built,
and at the lowest level is the native system.

### Routers

AllJoyn routers are the glue that holds the AllJoyn system together.
As previously discussed, routers are programs that run in
the background, waiting for interesting events to happen and
responding to them. Because these events are usually external,
it is better to approach the router architecture from a bottom-up
perspective.

At the lowest level of the router architecture figure below,
resides the native system. We use the same OS abstraction layer
as we do in the client architecture to provide common abstractions
for routers running on Linux, Windows, and Android. Running on
the OS abstraction layer, we have the various low-level networking
components of the router. Recall that clients, services, and
peers only use a local interprocess communication mechanism
to talk to a router, so it is the router that must deal with
the various available transport mechanisms on a given platform.
Note the "Local" transport in the router architecture figure which is the sole
connection to the AllJoyn clients, services, and peers running
on a particular host.

![router-arch][router-arch]

**Figure:** Basic router architecture

For example, a Bluetooth transport would handle the complexities
of creating and managing piconets in the Bluetooth system.
Additionally, a Bluetooth transport provides service advertisement
and discovery functions appropriate to Bluetooth, as well
as providing reliable communications. Bluetooth and other
transports would be added at this transport layer along side
the IP transport.

The wired, Wi-Fi, and Wi-Fi Direct transports are grouped under
an IP umbrella since all of these transports use the underlying
TCP-IP network stack. There are sometimes significant differences
regarding how service advertisement and discovery is accomplished,
since this functionality is outside the scope of the TCP-IP
standard; so there are modules dedicated to this functionality.

The various technology-specific transport implementations are
collected into a Network Transports abstraction. The Sessions module
handles the establishment and maintenance of communication
connections to make a collection of routers and AllJoyn applications
appear as a unified software bus.

AllJoyn routers use the endpoint concept to provide connections
to local clients, services, and peers but extend the use of
these objects to bus-to-bus connections which are the transports
used by routers to send messages from host-to-host.

In addition to the routing functions implied by these connections,
an AllJoyn router provides its own endpoints corresponding
to bus objects used for managing or controlling the software
bus segment implemented by the router. For example, when
a service requests to advertise a well-known bus name, what
actually happens is that the helper on the service translates
this request into a remote method call that is directed to
a bus object implemented on the router. Just as in the case
of a service, the router has a number of bus objects living
at associated object paths which implement specific named interfaces.
The low-level mechanism for controlling an AllJoyn bus is
sending remote method invocations to these router bus objects.

The overall operation of certain aspects of router operation
are controlled by a configuration subsystem. This allows a
system administrator to specify certain permissions for the
system and provides the ability to arrange for on-demand
creation of services. Additionally, resource consumption may
be limited by configuration of the router, allowing a system
administrator to, for example, limit the number of TCP connections
active at any given time. There are options which allow system
administrators to mitigate the effects of certain denial-of-service
attacks, by limiting the number of connections which are
currently authenticating, for example.

## Summary

The AllJoyn framework is a comprehensive system designed to
provide a framework for deploying distributed applications
on heterogeneous systems with mobile elements.

The AllJoyn framework provides solutions, building on proven
technologies and standard security systems, that address the
interaction of various network technologies in a coherent,
systematic way. This allows application developers to focus
on the content of their applications without requiring a large
amount of low-level networking experience.

The AllJoyn system is designed to work together as a whole
and does not suffer from inherent impedance mismatches that
might be seen in ad-hoc systems built from various pieces.
We believe that the AllJoyn system can make development and
deployment of distributed applications significantly simpler
than those developed on other platforms.

[overview]: #overview
[prototypical-alljoyn-bus]: /files/learn/standard-core/prototypical-alljoyn-bus.png
[device-device-comm]: /files/learn/standard-core/device-device-comm.png
[dist-bus-local-bus]: /files/learn/standard-core/dist-bus-local-bus.png
[bubble-diagram-bus]: /files/learn/standard-core/bubble-diagram-bus.png
[alljoyn-bubble-diagram]: /files/learn/standard-core/alljoyn-bubble-diagram.png
[hypothetical-alljoyn-bus-instance]: /files/learn/standard-core/hypothetical-alljoyn-bus-instance.png
[service-performs-advertise]: /files/learn/standard-core/service-performs-advertise.png
[client-requests-find-name]: /files/learn/standard-core/client-requests-find-name.png
[router-reports-found-name]: /files/learn/standard-core/router-reports-found-name.png
[client-discovers-service]: /files/learn/standard-core/client-discovers-service.png
[client-service-peer-arch]: /files/learn/standard-core/client-service-peer-arch.png
[router-arch]: /files/learn/standard-core/router-arch.png
